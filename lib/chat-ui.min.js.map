{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///chat-ui.min.js","webpack:///webpack/bootstrap 78871675bfec57263bb5","webpack:///./source/index.js","webpack:///./source/components/MainFrame.js","webpack:///./source/constants/general.js","webpack:///./source/constants/header.js","webpack:///./source/components/Component.js","webpack:///./source/components/Header.js","webpack:///./source/services/templateEngine.js","webpack:///./source/services/eventEmitter.js","webpack:///./~/wolfy87-eventemitter/EventEmitter.js","webpack:///./source/services/chatSettings.js","webpack:///./source/constants/settings.js","webpack:///./source/components/Dialog.js","webpack:///./source/constants/dialog.js","webpack:///./source/services/componentRender.js","webpack:///./source/services/templateTreeRender.js","webpack:///./source/services/dialogList.js","webpack:///./source/services/sanitize.js","webpack:///./source/vendor/html-sanitizer.js","webpack:///./source/vendor/html4-defs.js","webpack:///./source/components/DialogBubble.js","webpack:///./source/components/Input.js","webpack:///./source/services/domHelper.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_MainFrame","_Dialog","_eventEmitter","_chatSettings","_componentRender","ChatUI","chatData","render","querySelector","componentName","baseEl","document","Error","chatSettings","setSettings","appendChild","componentRender","Dialog","MainFrame","on","eventName","callback","eventEmitter","addListener","off","removeListener","trigger","data","emit","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","undefined","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_general","_header","_Component2","_Header","_Input","_domHelper","_Component","_this","getPrototypeOf","openChatClass","LIB_NAME","_this2","CLOSE_CHAT","closeSource","source","CHAT_CLOSED_SOURCE_CHAT","domHelper","removeClass","refs","mainframe","CHAT_CLOSED","OPEN_CHAT","addClass","addEvents","div","ref","children","className","component","Header","Input","Component","CHAT_CLOSED_SOURCE_USER","newRefs","innerHTML","_templateEngine","onClose","closeBtnClass","innerTemplate","avatar","getProperty","title","subtitle","templateEngine","click","html","re","reExp","code","cursor","result","match","add","line","js","replace","exec","slice","index","substr","Function","apply","err","console","error","message","_interopRequireDefault","obj","__esModule","default","_wolfy87Eventemitter","_wolfy87Eventemitter2","ee","__WEBPACK_AMD_DEFINE_RESULT__","EventEmitter","indexOfListener","listeners","listener","alias","name","arguments","proto","originalGlobalValue","getListeners","evt","response","events","_getEvents","RegExp","hasOwnProperty","test","flattenListeners","flatListeners","push","getListenersAsObject","Array","listenerIsWrapped","once","addOnceListener","defineEvent","defineEvents","evts","splice","addListeners","manipulateListeners","removeListeners","remove","single","multiple","removeEvent","type","_events","removeAllListeners","emitEvent","args","listenersMap","_getOnceReturnValue","setOnceReturnValue","_onceReturnValue","noConflict","_settings","settings","sendText","inputPlaceholder","isTyping","newSettings","settingsChanged","SETTINGS_CHANGED","property","_dialog","_dialogList","_sanitize","_DialogBubble","dialogListEl","addPhrase","dialogEl","$$dialogListEl","getElementsByClassName","temporaryPhrase","dialogList","getTemporaryPhrase","IS_TYPING","warn","side","SIDE_USER","SIDE_CHAT","sanitize","bubbleComponent","DialogBubble","insertBefore","parentNode","removeChild","USER_SEND_MESSAGE","scrollDialogDown","scrollTop","scrollHeight","ADD_PHRASE","CLEAR_DIALOG","clearDialog","_templateTreeRender","ComponentClass","componentData","renderedComponent","templateTreeRender","$$updateRefs","componentWillMount","fragment","tree","createDocumentFragment","createElement","tagName","elementData","element","createTextNode","len","subKey","setAttribute","indexOf","addEventListener","el","dialog","newPhrase","temporaryPhraseIndex","_htmlSanitizer","userInput","htmlSanitize","_typeof","Symbol","iterator","_html4Defs","toLowerCase","defs","TagPolicyDecision","TagPolicy","html4","lookupEntity","ENTITIES","decimalEscapeRe","String","fromCharCode","parseInt","hexEscapeRe","entityLookupElement","safeEntityNameRe","text","textContent","decodeOneEntity","_","stripNULs","s","nulRe","unescapeEntities","ENTITY_RE_1","escapeAttrib","ampRe","ltRe","gtRe","quotRe","normalizeRCData","rcdata","looseAmpRe","makeSaxParser","handler","hcopy","cdata","comment","endDoc","endTag","pcdata","startDoc","startTag","htmlText","param","parse","parts","htmlSplit","state","noMoreGT","noMoreEndComments","parseCPS","continuationMaker","h","initial","pos","end","current","next","ENTITY_RE_2","continuationMarker","parseEndTag","eflags","ELEMENTS","EFLAGS_TEXT","tag","parseText","parseStartTag","join","e","str","splitWillCapture","split","lastPos","substring","parseTagAndAttrs","attrs","endTagRe","first","buf","ATTR_RE","quote","sawQuote","abuf","aName","aValue","decodeValue","v","q","charCodeAt","makeHtmlSanitizer","tagPolicy","stack","ignoring","out","tagNameOrig","attribs","eflagsOrig","decision","eflagsRep","tagNameRep","onStack","orig","rep","n","attribName","stackElOrigTag","stackElRepTag","safeUri","uri","effect","ltype","hints","naiveUriRewriter","parsed","URI","hasScheme","ALLOWED_URI_SCHEMES","getScheme","safe","toString","log","logger","oldValue","newValue","change","changed","lookupAttribute","map","attribKey","getLoaderType","LOADERTYPES","getUriEffect","URIEFFECTS","sanitizeAttribs","opt_naiveUriRewriter","opt_nmTokenPolicy","opt_logger","atype","ATTRIBS","parseCssDeclarations","sanitizedDeclarations","declaration","tokens","normProp","sanitizeCssProperty","url","ueffects","SAME_DOCUMENT","ltypes","SANDBOXED","TYPE","CSS_PROP","XML_ATTR","XML_TAG","charAt","makeTagPolicy","sanitizeWithPolicy","inputHtml","outputArray","cssSchema","window","lt","LT","gt","GT","amp","AMP","quot","apos","nbsp","NONE","URI_FRAGMENT","SCRIPT","STYLE","HTML","ID","IDREF","IDREFS","GLOBAL_NAME","LOCAL_NAME","CLASSES","FRAME_TARGET","MEDIA_QUERY","*::class","*::dir","*::draggable","*::hidden","*::id","*::inert","*::itemprop","*::itemref","*::itemscope","*::lang","*::onblur","*::onchange","*::onclick","*::ondblclick","*::onerror","*::onfocus","*::onkeydown","*::onkeypress","*::onkeyup","*::onload","*::onmousedown","*::onmousemove","*::onmouseout","*::onmouseover","*::onmouseup","*::onreset","*::onscroll","*::onselect","*::onsubmit","*::ontouchcancel","*::ontouchend","*::ontouchenter","*::ontouchleave","*::ontouchmove","*::ontouchstart","*::onunload","*::spellcheck","*::style","*::tabindex","*::title","*::translate","a::accesskey","a::coords","a::href","a::hreflang","a::name","a::onblur","a::onfocus","a::shape","a::target","a::type","area::accesskey","area::alt","area::coords","area::href","area::nohref","area::onblur","area::onfocus","area::shape","area::target","audio::controls","audio::loop","audio::mediagroup","audio::muted","audio::preload","audio::src","bdo::dir","blockquote::cite","br::clear","button::accesskey","button::disabled","button::name","button::onblur","button::onfocus","button::type","button::value","canvas::height","canvas::width","caption::align","col::align","col::char","col::charoff","col::span","col::valign","col::width","colgroup::align","colgroup::char","colgroup::charoff","colgroup::span","colgroup::valign","colgroup::width","command::checked","command::command","command::disabled","command::icon","command::label","command::radiogroup","command::type","data::value","del::cite","del::datetime","details::open","dir::compact","div::align","dl::compact","fieldset::disabled","font::color","font::face","font::size","form::accept","form::action","form::autocomplete","form::enctype","form::method","form::name","form::novalidate","form::onreset","form::onsubmit","form::target","h1::align","h2::align","h3::align","h4::align","h5::align","h6::align","hr::align","hr::noshade","hr::size","hr::width","iframe::align","iframe::frameborder","iframe::height","iframe::marginheight","iframe::marginwidth","iframe::width","img::align","img::alt","img::border","img::height","img::hspace","img::ismap","img::name","img::src","img::usemap","img::vspace","img::width","input::accept","input::accesskey","input::align","input::alt","input::autocomplete","input::checked","input::disabled","input::inputmode","input::ismap","input::list","input::max","input::maxlength","input::min","input::multiple","input::name","input::onblur","input::onchange","input::onfocus","input::onselect","input::pattern","input::placeholder","input::readonly","input::required","input::size","input::src","input::step","input::type","input::usemap","input::value","ins::cite","ins::datetime","label::accesskey","label::for","label::onblur","label::onfocus","legend::accesskey","legend::align","li::type","li::value","map::name","menu::compact","menu::label","menu::type","meter::high","meter::low","meter::max","meter::min","meter::optimum","meter::value","ol::compact","ol::reversed","ol::start","ol::type","optgroup::disabled","optgroup::label","option::disabled","option::label","option::selected","option::value","output::for","output::name","p::align","pre::width","progress::max","progress::min","progress::value","q::cite","select::autocomplete","select::disabled","select::multiple","select::name","select::onblur","select::onchange","select::onfocus","select::required","select::size","source::type","table::align","table::bgcolor","table::border","table::cellpadding","table::cellspacing","table::frame","table::rules","table::summary","table::width","tbody::align","tbody::char","tbody::charoff","tbody::valign","td::abbr","td::align","td::axis","td::bgcolor","td::char","td::charoff","td::colspan","td::headers","td::height","td::nowrap","td::rowspan","td::scope","td::valign","td::width","textarea::accesskey","textarea::autocomplete","textarea::cols","textarea::disabled","textarea::inputmode","textarea::name","textarea::onblur","textarea::onchange","textarea::onfocus","textarea::onselect","textarea::placeholder","textarea::readonly","textarea::required","textarea::rows","textarea::wrap","tfoot::align","tfoot::char","tfoot::charoff","tfoot::valign","th::abbr","th::align","th::axis","th::bgcolor","th::char","th::charoff","th::colspan","th::headers","th::height","th::nowrap","th::rowspan","th::scope","th::valign","th::width","thead::align","thead::char","thead::charoff","thead::valign","tr::align","tr::bgcolor","tr::char","tr::charoff","tr::valign","track::default","track::kind","track::label","track::srclang","ul::compact","ul::type","video::controls","video::height","video::loop","video::mediagroup","video::muted","video::poster","video::preload","video::src","video::width","OPTIONAL_ENDTAG","EMPTY","CDATA","RCDATA","UNSAFE","FOLDABLE","VIRTUALIZED","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","col","colgroup","command","datalist","dd","del","details","dfn","dir","dl","dt","em","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","img","input","ins","isindex","kbd","keygen","label","legend","li","link","mark","menu","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","pre","progress","samp","script","section","select","small","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","ELEMENT_DOM_INTERFACES","iframe","NOT_LOADED","NEW_DOCUMENT","UNSANDBOXED","DATA","bubbleContainer","bubbleClass","bubbleContainerClass","bubbleClasses","inputClass","inputEl","onSubmit","event","preventDefault","$$inputEl","inputForm","setTimeout","focus","submit","classList","hasClass","contains","toggleClass","toggle","classes","existingIndex"],"mappings":"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","file":"chat-ui.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ChatUI\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ChatUI\"] = factory();\n\telse\n\t\troot[\"ChatUI\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ChatUI\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ChatUI\"] = factory();\n\telse\n\t\troot[\"ChatUI\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _MainFrame = __webpack_require__(1);\n\t\n\tvar _Dialog = __webpack_require__(11);\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _chatSettings = __webpack_require__(9);\n\t\n\tvar _componentRender = __webpack_require__(13);\n\t\n\tvar ChatUI = function ChatUI(chatData) {\n\t\n\t    return {\n\t        render: function render(querySelector, componentName) {\n\t            var baseEl = document.querySelector(querySelector);\n\t            if (!baseEl) {\n\t                throw new Error('Given selector ' + querySelector + ' is not match to any element');\n\t            }\n\t            _chatSettings.chatSettings.setSettings(chatData);\n\t            switch (componentName) {\n\t                case 'dialog':\n\t                    baseEl.appendChild((0, _componentRender.componentRender)(_Dialog.Dialog));\n\t                    break;\n\t                case 'mainFrame':\n\t                default:\n\t                    baseEl.appendChild((0, _componentRender.componentRender)(_MainFrame.MainFrame));\n\t                    break;\n\t            }\n\t            return {\n\t                on: function on(eventName, callback) {\n\t                    _eventEmitter.eventEmitter.addListener(eventName, callback);\n\t                },\n\t                off: function off(eventName, callback) {\n\t                    _eventEmitter.eventEmitter.removeListener(eventName, callback);\n\t                },\n\t                trigger: function trigger(eventName, data) {\n\t                    _eventEmitter.eventEmitter.emit(eventName, data);\n\t                }\n\t            };\n\t        }\n\t    };\n\t};\n\t\n\texports.default = ChatUI;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.MainFrame = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _header = __webpack_require__(3);\n\t\n\tvar _Component2 = __webpack_require__(4);\n\t\n\tvar _Header = __webpack_require__(5);\n\t\n\tvar _Dialog = __webpack_require__(11);\n\t\n\tvar _Input = __webpack_require__(20);\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _domHelper = __webpack_require__(21);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar MainFrame = exports.MainFrame = function (_Component) {\n\t    _inherits(MainFrame, _Component);\n\t\n\t    function MainFrame() {\n\t        _classCallCheck(this, MainFrame);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(MainFrame).call(this));\n\t\n\t        _this.openChatClass = _general.LIB_NAME + '-mainframe_open';\n\t        return _this;\n\t    }\n\t\n\t    _createClass(MainFrame, [{\n\t        key: 'addEvents',\n\t        value: function addEvents() {\n\t            var _this2 = this;\n\t\n\t            _eventEmitter.eventEmitter.on(_header.CLOSE_CHAT, function (data) {\n\t                var closeSource = data && data.source ? data.source : _header.CHAT_CLOSED_SOURCE_CHAT;\n\t                _domHelper.domHelper.removeClass(_this2.refs.mainframe, _this2.openChatClass);\n\t                _eventEmitter.eventEmitter.emit(_header.CHAT_CLOSED, { source: closeSource });\n\t            });\n\t\n\t            _eventEmitter.eventEmitter.on(_header.OPEN_CHAT, function () {\n\t                _domHelper.domHelper.addClass(_this2.refs.mainframe, _this2.openChatClass);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            this.addEvents();\n\t\n\t            return {\n\t                div: {\n\t                    id: _general.LIB_NAME + '-mainframe',\n\t                    ref: 'mainframe',\n\t                    children: [{\n\t                        div: {\n\t                            className: _general.LIB_NAME + '-header-container',\n\t                            component: _Header.Header\n\t                        }\n\t                    }, {\n\t                        div: {\n\t                            className: _general.LIB_NAME + '-dialog-container',\n\t                            component: _Dialog.Dialog\n\t                        }\n\t                    }, {\n\t                        div: {\n\t                            className: _general.LIB_NAME + '-input-container',\n\t                            component: _Input.Input\n\t                        }\n\t                    }]\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return MainFrame;\n\t}(_Component2.Component);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar LIB_NAME = exports.LIB_NAME = 'chat-ui';\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar CLOSE_CHAT = exports.CLOSE_CHAT = 'close-chat';\n\tvar CHAT_CLOSED = exports.CHAT_CLOSED = 'chat-closed';\n\tvar CHAT_CLOSED_SOURCE_USER = exports.CHAT_CLOSED_SOURCE_USER = 'user';\n\tvar CHAT_CLOSED_SOURCE_CHAT = exports.CHAT_CLOSED_SOURCE_CHAT = 'chat';\n\tvar OPEN_CHAT = exports.OPEN_CHAT = 'open-chat';\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Component = exports.Component = function () {\n\t    function Component() {\n\t        _classCallCheck(this, Component);\n\t\n\t        this.refs = {};\n\t    }\n\t\n\t    _createClass(Component, [{\n\t        key: 'componentWillMount',\n\t        value: function componentWillMount() {}\n\t    }, {\n\t        key: '$$updateRefs',\n\t        value: function $$updateRefs(newRefs) {\n\t            this.refs = newRefs;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            return {\n\t                div: {\n\t                    innerHTML: 'Basic Component'\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return Component;\n\t}();\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Header = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Component2 = __webpack_require__(4);\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _header = __webpack_require__(3);\n\t\n\tvar _templateEngine = __webpack_require__(6);\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _chatSettings = __webpack_require__(9);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Header = exports.Header = function (_Component) {\n\t    _inherits(Header, _Component);\n\t\n\t    function Header() {\n\t        _classCallCheck(this, Header);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Header).call(this));\n\t\n\t        _this.onClose = function () {\n\t            // Event for mainframe to close the chat (remove 'open' class)\n\t            _eventEmitter.eventEmitter.emit(_header.CLOSE_CHAT, { source: _header.CHAT_CLOSED_SOURCE_USER });\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    _createClass(Header, [{\n\t        key: 'render',\n\t        value: function render() {\n\t            var id = _general.LIB_NAME + '-header';\n\t            var closeBtnClass = _general.LIB_NAME + '-header__close';\n\t            var innerTemplate = '\\n            <div class=\"' + closeBtnClass + '\"></div>\\n            <div class=\"' + _general.LIB_NAME + '-header__cell ' + _general.LIB_NAME + '-header__cell_image\">\\n                <div class=\"' + _general.LIB_NAME + '-header__image\"\\n                     <% if (avatar) { %>\\n                     style=\"background-image: url(\\'<% avatar %>\\')\"\\n                     <% } %>\\n                     >\\n                </div>\\n            </div>\\n            <div class=\"' + _general.LIB_NAME + '-header__cell ' + _general.LIB_NAME + '-header__cell_title\">\\n                <div class=\"' + _general.LIB_NAME + '-header__title\">\\n                    <% title %>\\n                </div>\\n                <div class=\"' + _general.LIB_NAME + '-header__subtitle\">\\n                    <% subtitle %>\\n                </div>\\n            </div>\\n        ';\n\t            var chatData = {\n\t                avatar: _chatSettings.chatSettings.getProperty('avatar'),\n\t                title: _chatSettings.chatSettings.getProperty('title'),\n\t                subtitle: _chatSettings.chatSettings.getProperty('subtitle')\n\t            };\n\t\n\t            return {\n\t                div: {\n\t                    id: id,\n\t                    innerHTML: (0, _templateEngine.templateEngine)(innerTemplate, chatData),\n\t                    click: this.onClose\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return Header;\n\t}(_Component2.Component);\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t/**\n\t * Absurd TemplateEngine\n\t * https://github.com/krasimir/absurd/blob/master/lib/processors/html/helpers/TemplateEngine.js\n\t * http://krasimirtsonev.com/blog/article/Javascript-template-engine-in-just-20-line\n\t * @param html {string}\n\t * @param data {object}\n\t * @returns {string}\n\t * @constructor\n\t */\n\tvar templateEngine = exports.templateEngine = function templateEngine(html, data) {\n\t    var re = /<%(.+?)%>/g;\n\t    var reExp = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g;\n\t    var code = 'with(obj) { var r=[];\\n';\n\t    var cursor = 0;\n\t    var result = void 0;\n\t    var match = void 0;\n\t    var add = function add(line, js) {\n\t        if (js) {\n\t            code += line.match(reExp) ? line + '\\n' : 'r.push(' + line + ');\\n';\n\t        } else {\n\t            code += line !== '' ? 'r.push(\"' + line.replace(/\"/g, '\\\\\"') + '\");\\n' : '';\n\t        }\n\t        return add;\n\t    };\n\t    while (match = re.exec(html)) {\n\t        add(html.slice(cursor, match.index))(match[1], true);\n\t        cursor = match.index + match[0].length;\n\t    }\n\t    add(html.substr(cursor, html.length - cursor));\n\t    code = (code + 'return r.join(\"\"); }').replace(/[\\r\\t\\n]/g, ' ');\n\t    try {\n\t        result = new Function('obj', code).apply(data, [data]);\n\t    } catch (err) {\n\t        console.error('\\'' + err.message + '\\'', ' in \\n\\nCode:\\n', code, '\\n');\n\t    }\n\t    return result;\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.eventEmitter = undefined;\n\t\n\tvar _wolfy87Eventemitter = __webpack_require__(8);\n\t\n\tvar _wolfy87Eventemitter2 = _interopRequireDefault(_wolfy87Eventemitter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ee = null;\n\t\n\tvar eventEmitter = exports.eventEmitter = function () {\n\t    ee = ee || new _wolfy87Eventemitter2.default();\n\t    return ee;\n\t}();\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * EventEmitter v5.0.0 - git.io/ee\n\t * Unlicense - http://unlicense.org/\n\t * Oliver Caldwell - http://oli.me.uk/\n\t * @preserve\n\t */\n\t\n\t;(function () {\n\t    'use strict';\n\t\n\t    /**\n\t     * Class for managing events.\n\t     * Can be extended to provide event functionality in other classes.\n\t     *\n\t     * @class EventEmitter Manages event registering and emitting.\n\t     */\n\t    function EventEmitter() {}\n\t\n\t    // Shortcuts to improve speed and size\n\t    var proto = EventEmitter.prototype;\n\t    var exports = this;\n\t    var originalGlobalValue = exports.EventEmitter;\n\t\n\t    /**\n\t     * Finds the index of the listener for the event in its storage array.\n\t     *\n\t     * @param {Function[]} listeners Array of listeners to search through.\n\t     * @param {Function} listener Method to look for.\n\t     * @return {Number} Index of the specified listener, -1 if not found\n\t     * @api private\n\t     */\n\t    function indexOfListener(listeners, listener) {\n\t        var i = listeners.length;\n\t        while (i--) {\n\t            if (listeners[i].listener === listener) {\n\t                return i;\n\t            }\n\t        }\n\t\n\t        return -1;\n\t    }\n\t\n\t    /**\n\t     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n\t     *\n\t     * @param {String} name The name of the target method.\n\t     * @return {Function} The aliased method\n\t     * @api private\n\t     */\n\t    function alias(name) {\n\t        return function aliasClosure() {\n\t            return this[name].apply(this, arguments);\n\t        };\n\t    }\n\t\n\t    /**\n\t     * Returns the listener array for the specified event.\n\t     * Will initialise the event object and listener arrays if required.\n\t     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n\t     * Each property in the object response is an array of listener functions.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to return the listeners from.\n\t     * @return {Function[]|Object} All listener functions for the event.\n\t     */\n\t    proto.getListeners = function getListeners(evt) {\n\t        var events = this._getEvents();\n\t        var response;\n\t        var key;\n\t\n\t        // Return a concatenated array of all matching events if\n\t        // the selector is a regular expression.\n\t        if (evt instanceof RegExp) {\n\t            response = {};\n\t            for (key in events) {\n\t                if (events.hasOwnProperty(key) && evt.test(key)) {\n\t                    response[key] = events[key];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            response = events[evt] || (events[evt] = []);\n\t        }\n\t\n\t        return response;\n\t    };\n\t\n\t    /**\n\t     * Takes a list of listener objects and flattens it into a list of listener functions.\n\t     *\n\t     * @param {Object[]} listeners Raw listener objects.\n\t     * @return {Function[]} Just the listener functions.\n\t     */\n\t    proto.flattenListeners = function flattenListeners(listeners) {\n\t        var flatListeners = [];\n\t        var i;\n\t\n\t        for (i = 0; i < listeners.length; i += 1) {\n\t            flatListeners.push(listeners[i].listener);\n\t        }\n\t\n\t        return flatListeners;\n\t    };\n\t\n\t    /**\n\t     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to return the listeners from.\n\t     * @return {Object} All listener functions for an event in an object.\n\t     */\n\t    proto.getListenersAsObject = function getListenersAsObject(evt) {\n\t        var listeners = this.getListeners(evt);\n\t        var response;\n\t\n\t        if (listeners instanceof Array) {\n\t            response = {};\n\t            response[evt] = listeners;\n\t        }\n\t\n\t        return response || listeners;\n\t    };\n\t\n\t    /**\n\t     * Adds a listener function to the specified event.\n\t     * The listener will not be added if it is a duplicate.\n\t     * If the listener returns true then it will be removed after it is called.\n\t     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to attach the listener to.\n\t     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addListener = function addListener(evt, listener) {\n\t        var listeners = this.getListenersAsObject(evt);\n\t        var listenerIsWrapped = typeof listener === 'object';\n\t        var key;\n\t\n\t        for (key in listeners) {\n\t            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n\t                listeners[key].push(listenerIsWrapped ? listener : {\n\t                    listener: listener,\n\t                    once: false\n\t                });\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of addListener\n\t     */\n\t    proto.on = alias('addListener');\n\t\n\t    /**\n\t     * Semi-alias of addListener. It will add a listener that will be\n\t     * automatically removed after its first execution.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to attach the listener to.\n\t     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addOnceListener = function addOnceListener(evt, listener) {\n\t        return this.addListener(evt, {\n\t            listener: listener,\n\t            once: true\n\t        });\n\t    };\n\t\n\t    /**\n\t     * Alias of addOnceListener.\n\t     */\n\t    proto.once = alias('addOnceListener');\n\t\n\t    /**\n\t     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n\t     * You need to tell it what event names should be matched by a regex.\n\t     *\n\t     * @param {String} evt Name of the event to create.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.defineEvent = function defineEvent(evt) {\n\t        this.getListeners(evt);\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Uses defineEvent to define multiple events.\n\t     *\n\t     * @param {String[]} evts An array of event names to define.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.defineEvents = function defineEvents(evts) {\n\t        for (var i = 0; i < evts.length; i += 1) {\n\t            this.defineEvent(evts[i]);\n\t        }\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Removes a listener function from the specified event.\n\t     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to remove the listener from.\n\t     * @param {Function} listener Method to remove from the event.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeListener = function removeListener(evt, listener) {\n\t        var listeners = this.getListenersAsObject(evt);\n\t        var index;\n\t        var key;\n\t\n\t        for (key in listeners) {\n\t            if (listeners.hasOwnProperty(key)) {\n\t                index = indexOfListener(listeners[key], listener);\n\t\n\t                if (index !== -1) {\n\t                    listeners[key].splice(index, 1);\n\t                }\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of removeListener\n\t     */\n\t    proto.off = alias('removeListener');\n\t\n\t    /**\n\t     * Adds listeners in bulk using the manipulateListeners method.\n\t     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n\t     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n\t     * Yeah, this function does quite a bit. That's probably a bad thing.\n\t     *\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to add.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addListeners = function addListeners(evt, listeners) {\n\t        // Pass through to manipulateListeners\n\t        return this.manipulateListeners(false, evt, listeners);\n\t    };\n\t\n\t    /**\n\t     * Removes listeners in bulk using the manipulateListeners method.\n\t     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n\t     * You can also pass it an event name and an array of listeners to be removed.\n\t     * You can also pass it a regular expression to remove the listeners from all events that match it.\n\t     *\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeListeners = function removeListeners(evt, listeners) {\n\t        // Pass through to manipulateListeners\n\t        return this.manipulateListeners(true, evt, listeners);\n\t    };\n\t\n\t    /**\n\t     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n\t     * The first argument will determine if the listeners are removed (true) or added (false).\n\t     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n\t     * You can also pass it an event name and an array of listeners to be added/removed.\n\t     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n\t     *\n\t     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n\t        var i;\n\t        var value;\n\t        var single = remove ? this.removeListener : this.addListener;\n\t        var multiple = remove ? this.removeListeners : this.addListeners;\n\t\n\t        // If evt is an object then pass each of its properties to this method\n\t        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n\t            for (i in evt) {\n\t                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n\t                    // Pass the single listener straight through to the singular method\n\t                    if (typeof value === 'function') {\n\t                        single.call(this, i, value);\n\t                    }\n\t                    else {\n\t                        // Otherwise pass back to the multiple function\n\t                        multiple.call(this, i, value);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            // So evt must be a string\n\t            // And listeners must be an array of listeners\n\t            // Loop over it and pass each one to the multiple method\n\t            i = listeners.length;\n\t            while (i--) {\n\t                single.call(this, evt, listeners[i]);\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Removes all listeners from a specified event.\n\t     * If you do not specify an event then all listeners will be removed.\n\t     * That means every event will be emptied.\n\t     * You can also pass a regex to remove all events that match it.\n\t     *\n\t     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeEvent = function removeEvent(evt) {\n\t        var type = typeof evt;\n\t        var events = this._getEvents();\n\t        var key;\n\t\n\t        // Remove different things depending on the state of evt\n\t        if (type === 'string') {\n\t            // Remove all listeners for the specified event\n\t            delete events[evt];\n\t        }\n\t        else if (evt instanceof RegExp) {\n\t            // Remove all events matching the regex.\n\t            for (key in events) {\n\t                if (events.hasOwnProperty(key) && evt.test(key)) {\n\t                    delete events[key];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            // Remove all listeners in all events\n\t            delete this._events;\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of removeEvent.\n\t     *\n\t     * Added to mirror the node API.\n\t     */\n\t    proto.removeAllListeners = alias('removeEvent');\n\t\n\t    /**\n\t     * Emits an event of your choice.\n\t     * When emitted, every listener attached to that event will be executed.\n\t     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n\t     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n\t     * So they will not arrive within the array on the other side, they will be separate.\n\t     * You can also pass a regular expression to emit to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n\t     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.emitEvent = function emitEvent(evt, args) {\n\t        var listenersMap = this.getListenersAsObject(evt);\n\t        var listeners;\n\t        var listener;\n\t        var i;\n\t        var key;\n\t        var response;\n\t\n\t        for (key in listenersMap) {\n\t            if (listenersMap.hasOwnProperty(key)) {\n\t                listeners = listenersMap[key].slice(0);\n\t\n\t                for (i = 0; i < listeners.length; i++) {\n\t                    // If the listener returns true then it shall be removed from the event\n\t                    // The function is executed either with a basic call or an apply if there is an args array\n\t                    listener = listeners[i];\n\t\n\t                    if (listener.once === true) {\n\t                        this.removeListener(evt, listener.listener);\n\t                    }\n\t\n\t                    response = listener.listener.apply(this, args || []);\n\t\n\t                    if (response === this._getOnceReturnValue()) {\n\t                        this.removeListener(evt, listener.listener);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of emitEvent\n\t     */\n\t    proto.trigger = alias('emitEvent');\n\t\n\t    /**\n\t     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n\t     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n\t     * @param {...*} Optional additional arguments to be passed to each listener.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.emit = function emit(evt) {\n\t        var args = Array.prototype.slice.call(arguments, 1);\n\t        return this.emitEvent(evt, args);\n\t    };\n\t\n\t    /**\n\t     * Sets the current value to check against when executing listeners. If a\n\t     * listeners return value matches the one set here then it will be removed\n\t     * after execution. This value defaults to true.\n\t     *\n\t     * @param {*} value The new value to check for when executing listeners.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n\t        this._onceReturnValue = value;\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Fetches the current value to check against when executing listeners. If\n\t     * the listeners return value matches this one then it should be removed\n\t     * automatically. It will return true by default.\n\t     *\n\t     * @return {*|Boolean} The current value to check for or the default, true.\n\t     * @api private\n\t     */\n\t    proto._getOnceReturnValue = function _getOnceReturnValue() {\n\t        if (this.hasOwnProperty('_onceReturnValue')) {\n\t            return this._onceReturnValue;\n\t        }\n\t        else {\n\t            return true;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Fetches the events object and creates one if required.\n\t     *\n\t     * @return {Object} The events storage object.\n\t     * @api private\n\t     */\n\t    proto._getEvents = function _getEvents() {\n\t        return this._events || (this._events = {});\n\t    };\n\t\n\t    /**\n\t     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n\t     *\n\t     * @return {Function} Non conflicting EventEmitter class.\n\t     */\n\t    EventEmitter.noConflict = function noConflict() {\n\t        exports.EventEmitter = originalGlobalValue;\n\t        return EventEmitter;\n\t    };\n\t\n\t    // Expose the class either via AMD, CommonJS or the global object\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t            return EventEmitter;\n\t        }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t    else if (typeof module === 'object' && module.exports){\n\t        module.exports = EventEmitter;\n\t    }\n\t    else {\n\t        exports.EventEmitter = EventEmitter;\n\t    }\n\t}.call(this));\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.chatSettings = undefined;\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _settings = __webpack_require__(10);\n\t\n\tvar chatSettings = exports.chatSettings = function () {\n\t    var settings = {\n\t        // Chat title or name of the consultant\n\t        title: 'John Doe',\n\t        // Position or consultant description\n\t        subtitle: 'consultant',\n\t        // Avatar image of the consultant - string or boolean\n\t        avatar: false,\n\t        // Text for \"send\" button in chat window\n\t        sendText: 'Send',\n\t        // Placeholder text on the input\n\t        inputPlaceholder: 'Enter your message',\n\t        // Message that operator is typing\n\t        isTyping: '\\n            <div class=\"' + _general.LIB_NAME + '-dots-loading\">\\n                <span class=\"dots-loading__dot\">&#8226;</span>\\n                <span class=\"dots-loading__dot\">&#8226;</span>\\n                <span class=\"dots-loading__dot\">&#8226;</span>\\n            </div>\\n        '\n\t    };\n\t\n\t    return {\n\t        setSettings: function setSettings(newSettings) {\n\t            var settingsChanged = false;\n\t            for (var key in newSettings) {\n\t                if (settings.hasOwnProperty(key)) {\n\t                    settings[key] = newSettings[key];\n\t                    settingsChanged = true;\n\t                }\n\t            }\n\t            if (settingsChanged) {\n\t                _eventEmitter.eventEmitter.emit(_settings.SETTINGS_CHANGED);\n\t            }\n\t        },\n\t\n\t        getProperty: function getProperty(property) {\n\t            return settings[property];\n\t        }\n\t    };\n\t}();\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar SETTINGS_CHANGED = exports.SETTINGS_CHANGED = 'settings-changed';\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Dialog = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Component2 = __webpack_require__(4);\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _dialog = __webpack_require__(12);\n\t\n\tvar _templateEngine = __webpack_require__(6);\n\t\n\tvar _componentRender = __webpack_require__(13);\n\t\n\tvar _dialogList = __webpack_require__(15);\n\t\n\tvar _chatSettings = __webpack_require__(9);\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _sanitize = __webpack_require__(16);\n\t\n\tvar _DialogBubble = __webpack_require__(19);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Dialog = exports.Dialog = function (_Component) {\n\t    _inherits(Dialog, _Component);\n\t\n\t    function Dialog() {\n\t        _classCallCheck(this, Dialog);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Dialog).call(this));\n\t\n\t        _this.dialogListEl = null;\n\t\n\t        /**\n\t         * Add phrase to the dialog\n\t         * @param data {Object}\n\t         * @param data.side {string}\n\t         * @param data.message {string}\n\t         * @param data.type {string}\n\t         */\n\t        _this.addPhrase = function (data) {\n\t            if (!_this.dialogListEl) {\n\t                var dialogEl = _this.refs.dialogEl;\n\t                var $$dialogListEl = dialogEl.getElementsByClassName(_general.LIB_NAME + '-dialog-list');\n\t                if ($$dialogListEl) {\n\t                    _this.dialogListEl = $$dialogListEl[0];\n\t                }\n\t            }\n\t            var temporaryPhrase = _dialogList.dialogList.getTemporaryPhrase();\n\t            var message = void 0;\n\t            if (temporaryPhrase && data.type === _dialog.IS_TYPING) {\n\t                console.warn('There is already \"is-typing\" phrase in the dialog. You can\\'t add another one.');\n\t                return;\n\t            }\n\t            var side = data.side === _dialog.SIDE_USER ? _dialog.SIDE_USER : _dialog.SIDE_CHAT;\n\t            if (data.type === _dialog.IS_TYPING) {\n\t                message = _chatSettings.chatSettings.getProperty('isTyping');\n\t            } else {\n\t                message = (0, _sanitize.sanitize)(typeof data === 'string' ? data : data.message);\n\t            }\n\t            var bubbleComponent = (0, _componentRender.componentRender)(_DialogBubble.DialogBubble, {\n\t                side: side,\n\t                message: message,\n\t                type: data.type\n\t            });\n\t            if (temporaryPhrase && side !== temporaryPhrase.side) {\n\t                _this.dialogListEl.insertBefore(bubbleComponent, temporaryPhrase.ref);\n\t            } else {\n\t                if (temporaryPhrase) {\n\t                    temporaryPhrase.ref.parentNode.removeChild(temporaryPhrase.ref);\n\t                }\n\t                _this.dialogListEl.appendChild(bubbleComponent);\n\t            }\n\t            if (side === _dialog.SIDE_USER) {\n\t                _eventEmitter.eventEmitter.emit(_dialog.USER_SEND_MESSAGE, data.message);\n\t            }\n\t            _this.scrollDialogDown();\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    _createClass(Dialog, [{\n\t        key: 'scrollDialogDown',\n\t        value: function scrollDialogDown() {\n\t            this.refs.dialogEl.scrollTop = this.refs.dialogEl.scrollHeight;\n\t        }\n\t    }, {\n\t        key: 'addEvents',\n\t        value: function addEvents() {\n\t            var _this2 = this;\n\t\n\t            _eventEmitter.eventEmitter.addListener(_dialog.ADD_PHRASE, this.addPhrase);\n\t            _eventEmitter.eventEmitter.addListener(_dialog.IS_TYPING, function () {\n\t                _this2.addPhrase({\n\t                    type: _dialog.IS_TYPING\n\t                });\n\t            });\n\t            _eventEmitter.eventEmitter.on(_dialog.CLEAR_DIALOG, function () {\n\t                _this2.dialogListEl.innerHTML = '';\n\t                _dialogList.dialogList.clearDialog();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            var id = _general.LIB_NAME + '-dialog';\n\t            var innerTemplate = '\\n            <div class=\"' + _general.LIB_NAME + '-dialog-list\">\\n            </div>\\n        ';\n\t\n\t            this.addEvents();\n\t            return {\n\t                div: {\n\t                    id: id,\n\t                    innerHTML: (0, _templateEngine.templateEngine)(innerTemplate, {}),\n\t                    ref: 'dialogEl'\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return Dialog;\n\t}(_Component2.Component);\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar ADD_PHRASE = exports.ADD_PHRASE = 'add-phrase';\n\tvar USER_SEND_MESSAGE = exports.USER_SEND_MESSAGE = 'user-send-message';\n\tvar CLEAR_DIALOG = exports.CLEAR_DIALOG = 'clear-dialog';\n\tvar IS_TYPING = exports.IS_TYPING = 'is-typing';\n\tvar SIDE_USER = exports.SIDE_USER = 'user';\n\tvar SIDE_CHAT = exports.SIDE_CHAT = 'chat';\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.componentRender = undefined;\n\t\n\tvar _templateTreeRender = __webpack_require__(14);\n\t\n\tvar componentRender = exports.componentRender = function componentRender(ComponentClass) {\n\t    var componentData = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t    var component = new ComponentClass();\n\t    var renderedComponent = (0, _templateTreeRender.templateTreeRender)(component.render(componentData));\n\t\n\t    component.$$updateRefs(renderedComponent.refs);\n\t\n\t    component.componentWillMount();\n\t\n\t    return renderedComponent.fragment;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.templateTreeRender = undefined;\n\t\n\tvar _componentRender = __webpack_require__(13);\n\t\n\t/**\n\t * Template Tree Render\n\t * {\n\t *     div: {\n\t *         children: [\n\t *              {\n\t *                  span: {\n\t *                      // ...\n\t *                  }\n\t *              }\n\t *         ],\n\t *         className: \"header__title header__title_important\"\n\t *         ref: 'reference-name'    // reference object to the node\n\t *         text: '',                // text node\n\t *         innerHtml: '',           // inner html, can't be with \"text\" in the same element\n\t *         click: function() {}     // event handler\n\t *     }\n\t * }\n\t * @param tree {Object}\n\t * @returns {Object}\n\t */\n\t\n\tvar templateTreeRender = exports.templateTreeRender = function templateTreeRender(tree) {\n\t    var fragment = document.createDocumentFragment();\n\t    var refs = {};\n\t\n\t    var createElement = function createElement(tagName, elementData) {\n\t        var element = document.createElement(tagName);\n\t        var events = ['click', 'submit'];\n\t        if (elementData.hasOwnProperty('text') && elementData.hasOwnProperty('innerHtml')) {\n\t            throw new Error('Element \"' + tagName + '\" has both \"text\" and \"innerHtml\" in object. Should be one');\n\t        }\n\t        for (var key in elementData) {\n\t            switch (true) {\n\t                case key === 'text':\n\t                    element.createTextNode(elementData[key]);\n\t                    break;\n\t                case key === 'innerHTML':\n\t                    element.innerHTML = elementData[key];\n\t                    break;\n\t                case key === 'children':\n\t                    for (var i = 0, len = elementData[key].length; i < len; i++) {\n\t                        for (var subKey in elementData[key][i]) {\n\t                            element.appendChild(createElement(subKey, elementData[key][i][subKey]));\n\t                        }\n\t                    }\n\t                    break;\n\t                case key === 'className':\n\t                    element.setAttribute('class', elementData[key]);\n\t                    break;\n\t                case key === 'ref':\n\t                    refs[elementData[key]] = element;\n\t                    break;\n\t                case key === 'component':\n\t                    element.appendChild((0, _componentRender.componentRender)(elementData[key]));\n\t                    break;\n\t                case events.indexOf(key) > -1:\n\t                    element.addEventListener(key, elementData[key]);\n\t                    break;\n\t                default:\n\t                    element.setAttribute(key, elementData[key]);\n\t            }\n\t        }\n\t        return element;\n\t    };\n\t\n\t    for (var key in tree) {\n\t        var el = createElement(key, tree[key]);\n\t        fragment.appendChild(el);\n\t    }\n\t\n\t    return {\n\t        fragment: fragment,\n\t        refs: refs\n\t    };\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.dialogList = undefined;\n\t\n\tvar _dialog = __webpack_require__(12);\n\t\n\tvar dialogList = exports.dialogList = function () {\n\t    var dialog = [];\n\t\n\t    return {\n\t        addPhrase: function addPhrase(newPhrase) {\n\t            var temporaryPhrase = void 0;\n\t            var temporaryPhraseIndex = void 0;\n\t            for (var i = 0, len = dialog.length; i < len; i++) {\n\t                if (dialog[i].type === _dialog.IS_TYPING) {\n\t                    temporaryPhrase = dialog[i];\n\t                    temporaryPhraseIndex = i;\n\t                }\n\t            }\n\t            if (temporaryPhrase && newPhrase.side !== temporaryPhrase.side) {\n\t                // insert before\n\t                dialog.splice(temporaryPhraseIndex, 0, newPhrase);\n\t            } else {\n\t                if (temporaryPhrase) {\n\t                    dialog.splice(temporaryPhraseIndex, 1);\n\t                }\n\t                dialog.push({\n\t                    side: newPhrase.side, // 'chat', 'user'\n\t                    message: newPhrase.message, // text of the message\n\t                    ref: newPhrase.ref || null, // bubble element reference\n\t                    type: newPhrase.type // 'is-typing'\n\t                });\n\t            }\n\t        },\n\t\n\t        getTemporaryPhrase: function getTemporaryPhrase() {\n\t            for (var i = 0, len = dialog.length; i < len; i++) {\n\t                if (dialog[i].type === _dialog.IS_TYPING) {\n\t                    return dialog[i];\n\t                }\n\t            }\n\t            return null;\n\t        },\n\t\n\t        clearDialog: function clearDialog() {\n\t            dialog = [];\n\t        }\n\t    };\n\t}();\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.sanitize = undefined;\n\t\n\tvar _htmlSanitizer = __webpack_require__(17);\n\t\n\tvar sanitize = exports.sanitize = function sanitize(userInput) {\n\t    return (0, _htmlSanitizer.htmlSanitize)(userInput);\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.htmlSanitize = exports.html = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }; /* eslint-disable */\n\t\n\tvar _html4Defs = __webpack_require__(18);\n\t\n\t// Copyright (C) 2006 Google Inc.\n\t//\n\t// Licensed under the Apache License, Version 2.0 (the \"License\");\n\t// you may not use this file except in compliance with the License.\n\t// You may obtain a copy of the License at\n\t//\n\t//      http://www.apache.org/licenses/LICENSE-2.0\n\t//\n\t// Unless required by applicable law or agreed to in writing, software\n\t// distributed under the License is distributed on an \"AS IS\" BASIS,\n\t// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t// See the License for the specific language governing permissions and\n\t// limitations under the License.\n\t\n\t/**\n\t * @fileoverview\n\t * An HTML sanitizer that can satisfy a variety of security policies.\n\t *\n\t * <p>\n\t * The HTML sanitizer is built around a SAX parser and HTML element and\n\t * attributes schemas.\n\t *\n\t * If the cssparser is loaded, inline styles are sanitized using the\n\t * css property and value schemas.  Else they are remove during\n\t * sanitization.\n\t *\n\t * If it exists, uses parseCssDeclarations, sanitizeCssProperty,  cssSchema\n\t *\n\t * @author mikesamuel@gmail.com\n\t * @author jasvir@gmail.com\n\t * \\@requires html4, URI\n\t * \\@overrides window\n\t * \\@provides html, html_sanitize, defs\n\t */\n\t\n\t// The Turkish i seems to be a non-issue, but abort in case it is.\n\tif ('I'.toLowerCase() !== 'i') {\n\t    throw 'I/i problem';\n\t}\n\t\n\t// TODO(kpreid): Refactor so there is no global introduced by these type\n\t// definitions.\n\t\n\t/**\n\t * Contains types related to sanitizer policies.\n\t * \\@namespace\n\t */\n\tvar defs = {};\n\t\n\t/**\n\t * A decision about what to do with a tag.\n\t * @typedef {{ 'attribs': ?Array.<string>, 'tagName': ?string }}\n\t */\n\tdefs.TagPolicyDecision;\n\t\n\t/**\n\t * A function that takes a tag name (canonical) and an array of attributes\n\t * and decides what to do, returning null to indicate the tag should be dropped\n\t * entirely from the output.\n\t *\n\t * @typedef {function(string, Array.<string>): ?defs.TagPolicyDecision}\n\t */\n\tdefs.TagPolicy;\n\t\n\t/**\n\t * \\@namespace\n\t */\n\tvar html = exports.html = function (html4) {\n\t\n\t    // For closure compiler\n\t    var parseCssDeclarations, sanitizeCssProperty, cssSchema;\n\t    if ('undefined' !== typeof window) {\n\t        parseCssDeclarations = window['parseCssDeclarations'];\n\t        sanitizeCssProperty = window['sanitizeCssProperty'];\n\t        cssSchema = window['cssSchema'];\n\t    }\n\t\n\t    // The keys of this object must be 'quoted' or JSCompiler will mangle them!\n\t    // This is a partial list -- lookupEntity() uses the host browser's parser\n\t    // (when available) to implement full entity lookup.\n\t    // Note that entities are in general case-sensitive; the uppercase ones are\n\t    // explicitly defined by HTML5 (presumably as compatibility).\n\t    var ENTITIES = {\n\t        'lt': '<',\n\t        'LT': '<',\n\t        'gt': '>',\n\t        'GT': '>',\n\t        'amp': '&',\n\t        'AMP': '&',\n\t        'quot': '\"',\n\t        'apos': '\\'',\n\t        'nbsp': ''\n\t    };\n\t\n\t    // Patterns for types of entity/character reference names.\n\t    var decimalEscapeRe = /^#(\\d+)$/;\n\t    var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n\t    // contains every entity per http://www.w3.org/TR/2011/WD-html5-20110113/named-character-references.html\n\t    var safeEntityNameRe = /^[A-Za-z][A-za-z0-9]+$/;\n\t    // Used as a hook to invoke the browser's entity parsing. <textarea> is used\n\t    // because its content is parsed for entities but not tags.\n\t    // TODO(kpreid): This retrieval is a kludge and leads to silent loss of\n\t    // functionality if the document isn't available.\n\t    var entityLookupElement = 'undefined' !== typeof window && window['document'] ? window['document'].createElement('textarea') : null;\n\t    /**\n\t     * Decodes an HTML entity.\n\t     *\n\t     * {\\@updoc\n\t     * $ lookupEntity('lt')\n\t     * # '<'\n\t     * $ lookupEntity('GT')\n\t     * # '>'\n\t     * $ lookupEntity('amp')\n\t     * # '&'\n\t     * $ lookupEntity('nbsp')\n\t     * # '\\xA0'\n\t     * $ lookupEntity('apos')\n\t     * # \"'\"\n\t     * $ lookupEntity('quot')\n\t     * # '\"'\n\t     * $ lookupEntity('#xa')\n\t     * # '\\n'\n\t     * $ lookupEntity('#10')\n\t     * # '\\n'\n\t     * $ lookupEntity('#x0a')\n\t     * # '\\n'\n\t     * $ lookupEntity('#010')\n\t     * # '\\n'\n\t     * $ lookupEntity('#x00A')\n\t     * # '\\n'\n\t     * $ lookupEntity('Pi')      // Known failure\n\t     * # '\\u03A0'\n\t     * $ lookupEntity('pi')      // Known failure\n\t     * # '\\u03C0'\n\t     * }\n\t     *\n\t     * @param {string} name the content between the '&' and the ';'.\n\t     * @return {string} a single unicode code-point as a string.\n\t     */\n\t    function lookupEntity(name) {\n\t        // TODO: entity lookup as specified by HTML5 actually depends on the\n\t        // presence of the \";\".\n\t        if (ENTITIES.hasOwnProperty(name)) {\n\t            return ENTITIES[name];\n\t        }\n\t        var m = name.match(decimalEscapeRe);\n\t        if (m) {\n\t            return String.fromCharCode(parseInt(m[1], 10));\n\t        } else if (!!(m = name.match(hexEscapeRe))) {\n\t            return String.fromCharCode(parseInt(m[1], 16));\n\t        } else if (entityLookupElement && safeEntityNameRe.test(name)) {\n\t            entityLookupElement.innerHTML = '&' + name + ';';\n\t            var text = entityLookupElement.textContent;\n\t            ENTITIES[name] = text;\n\t            return text;\n\t        } else {\n\t            return '&' + name + ';';\n\t        }\n\t    }\n\t\n\t    function decodeOneEntity(_, name) {\n\t        return lookupEntity(name);\n\t    }\n\t\n\t    var nulRe = /\\0/g;\n\t    function stripNULs(s) {\n\t        return s.replace(nulRe, '');\n\t    }\n\t\n\t    var ENTITY_RE_1 = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/g;\n\t    var ENTITY_RE_2 = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/;\n\t    /**\n\t     * The plain text of a chunk of HTML CDATA which possibly containing.\n\t     *\n\t     * {\\@updoc\n\t     * $ unescapeEntities('')\n\t     * # ''\n\t     * $ unescapeEntities('hello World!')\n\t     * # 'hello World!'\n\t     * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n\t     * # '1 < 2 && 4 > 3\\n'\n\t     * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n\t     * # '<&lt <- unfinished entity>'\n\t     * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n\t     * # '/foo?bar=baz&copy=true'\n\t     * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n\t     * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n\t     * }\n\t     *\n\t     * @param {string} s a chunk of HTML CDATA.  It must not start or end inside\n\t     *     an HTML entity.\n\t     */\n\t    function unescapeEntities(s) {\n\t        return s.replace(ENTITY_RE_1, decodeOneEntity);\n\t    }\n\t\n\t    var ampRe = /&/g;\n\t    var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n\t    var ltRe = /[<]/g;\n\t    var gtRe = />/g;\n\t    var quotRe = /\\\"/g;\n\t\n\t    /**\n\t     * Escapes HTML special characters in attribute values.\n\t     *\n\t     * {\\@updoc\n\t     * $ escapeAttrib('')\n\t     * # ''\n\t     * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n\t     * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n\t     * $ escapeAttrib('Hello <World>!')\n\t     * # 'Hello &lt;World&gt;!'\n\t     * }\n\t     */\n\t    function escapeAttrib(s) {\n\t        return ('' + s).replace(ampRe, '&amp;').replace(ltRe, '&lt;').replace(gtRe, '&gt;').replace(quotRe, '&#34;');\n\t    }\n\t\n\t    /**\n\t     * Escape entities in RCDATA that can be escaped without changing the meaning.\n\t     * {\\@updoc\n\t     * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n\t     * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n\t     * }\n\t     */\n\t    function normalizeRCData(rcdata) {\n\t        return rcdata.replace(looseAmpRe, '&amp;$1').replace(ltRe, '&lt;').replace(gtRe, '&gt;');\n\t    }\n\t\n\t    // TODO(felix8a): validate sanitizer regexs against the HTML5 grammar at\n\t    // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n\t    // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n\t    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n\t    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\t\n\t    // We initially split input so that potentially meaningful characters\n\t    // like '<' and '>' are separate tokens, using a fast dumb process that\n\t    // ignores quoting.  Then we walk that token stream, and when we see a\n\t    // '<' that's the start of a tag, we use ATTR_RE to extract tag\n\t    // attributes from the next token.  That token will never have a '>'\n\t    // character.  However, it might have an unbalanced quote character, and\n\t    // when we see that, we combine additional tokens to balance the quote.\n\t\n\t    var ATTR_RE = new RegExp('^\\\\s*' + '([-.:\\\\w]+)' + // 1 = Attribute name\n\t    '(?:' + ('\\\\s*(=)\\\\s*' + // 2 = Is there a value?\n\t    '(' + ( // 3 = Attribute value\n\t    // TODO(felix8a): maybe use backref to match quotes\n\t    '(\\\")[^\\\"]*(\\\"|$)' + // 4, 5 = Double-quoted string\n\t    '|' + '(\\')[^\\']*(\\'|$)' + // 6, 7 = Single-quoted string\n\t    '|' +\n\t    // Positive lookahead to prevent interpretation of\n\t    // <foo a= b=c> as <foo a='b=c'>\n\t    // TODO(felix8a): might be able to drop this case\n\t    '(?=[a-z][-\\\\w]*\\\\s*=)' + '|' +\n\t    // Unquoted value that isn't an attribute name\n\t    // (since we didn't match the positive lookahead above)\n\t    '[^\\\"\\'\\\\s]*') + ')') + ')?', 'i');\n\t\n\t    // false on IE<=8, true on most other browsers\n\t    var splitWillCapture = 'a,b'.split(/(,)/).length === 3;\n\t\n\t    // bitmask for tags with special parsing, like <script> and <textarea>\n\t    var EFLAGS_TEXT = html4.eflags['CDATA'] | html4.eflags['RCDATA'];\n\t\n\t    /**\n\t     * Given a SAX-like event handler, produce a function that feeds those\n\t     * events and a parameter to the event handler.\n\t     *\n\t     * The event handler has the form:{@code\n\t     * {\n\t     *   // Name is an upper-case HTML tag name.  Attribs is an array of\n\t     *   // alternating upper-case attribute names, and attribute values.  The\n\t     *   // attribs array is reused by the parser.  Param is the value passed to\n\t     *   // the saxParser.\n\t     *   startTag: function (name, attribs, param) { ... },\n\t     *   endTag:   function (name, param) { ... },\n\t     *   pcdata:   function (text, param) { ... },\n\t     *   rcdata:   function (text, param) { ... },\n\t     *   cdata:    function (text, param) { ... },\n\t     *   startDoc: function (param) { ... },\n\t     *   endDoc:   function (param) { ... }\n\t     * }}\n\t     *\n\t     * @param {Object} handler a record containing event handlers.\n\t     * @return {function(string, Object)} A function that takes a chunk of HTML\n\t     *     and a parameter.  The parameter is passed on to the handler methods.\n\t     */\n\t    function makeSaxParser(handler) {\n\t        // Accept quoted or unquoted keys (Closure compat)\n\t        var hcopy = {\n\t            cdata: handler.cdata || handler['cdata'],\n\t            comment: handler.comment || handler['comment'],\n\t            endDoc: handler.endDoc || handler['endDoc'],\n\t            endTag: handler.endTag || handler['endTag'],\n\t            pcdata: handler.pcdata || handler['pcdata'],\n\t            rcdata: handler.rcdata || handler['rcdata'],\n\t            startDoc: handler.startDoc || handler['startDoc'],\n\t            startTag: handler.startTag || handler['startTag']\n\t        };\n\t        return function (htmlText, param) {\n\t            return parse(htmlText, hcopy, param);\n\t        };\n\t    }\n\t\n\t    // Parsing strategy is to split input into parts that might be lexically\n\t    // meaningful (every \">\" becomes a separate part), and then recombine\n\t    // parts if we discover they're in a different context.\n\t\n\t    // TODO(felix8a): Significant performance regressions from -legacy,\n\t    // tested on\n\t    //    Chrome 18.0\n\t    //    Firefox 11.0\n\t    //    IE 6, 7, 8, 9\n\t    //    Opera 11.61\n\t    //    Safari 5.1.3\n\t    // Many of these are unusual patterns that are linearly slower and still\n\t    // pretty fast (eg 1ms to 5ms), so not necessarily worth fixing.\n\t\n\t    // TODO(felix8a): \"<script> && && && ... <\\/script>\" is slower on all\n\t    // browsers.  The hotspot is htmlSplit.\n\t\n\t    // TODO(felix8a): \"<p title='>>>>...'><\\/p>\" is slower on all browsers.\n\t    // This is partly htmlSplit, but the hotspot is parseTagAndAttrs.\n\t\n\t    // TODO(felix8a): \"<a><\\/a><a><\\/a>...\" is slower on IE9.\n\t    // \"<a>1<\\/a><a>1<\\/a>...\" is faster, \"<a><\\/a>2<a><\\/a>2...\" is faster.\n\t\n\t    // TODO(felix8a): \"<p<p<p...\" is slower on IE[6-8]\n\t\n\t    var continuationMarker = {};\n\t    function parse(htmlText, handler, param) {\n\t        var m, p, tagName;\n\t        var parts = htmlSplit(htmlText);\n\t        var state = {\n\t            noMoreGT: false,\n\t            noMoreEndComments: false\n\t        };\n\t        parseCPS(handler, parts, 0, state, param);\n\t    }\n\t\n\t    function continuationMaker(h, parts, initial, state, param) {\n\t        return function () {\n\t            parseCPS(h, parts, initial, state, param);\n\t        };\n\t    }\n\t\n\t    function parseCPS(h, parts, initial, state, param) {\n\t        try {\n\t            if (h.startDoc && initial == 0) {\n\t                h.startDoc(param);\n\t            }\n\t            var m, p, tagName;\n\t            for (var pos = initial, end = parts.length; pos < end;) {\n\t                var current = parts[pos++];\n\t                var next = parts[pos];\n\t                switch (current) {\n\t                    case '&':\n\t                        if (ENTITY_RE_2.test(next)) {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&' + next, param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                            pos++;\n\t                        } else {\n\t                            if (h.pcdata) {\n\t                                h.pcdata(\"&amp;\", param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '<\\/':\n\t                        if (m = /^([-\\w:]+)[^\\'\\\"]*/.exec(next)) {\n\t                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n\t                                // fast case, no attribute parsing needed\n\t                                pos += 2;\n\t                                tagName = m[1].toLowerCase();\n\t                                if (h.endTag) {\n\t                                    h.endTag(tagName, param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                                }\n\t                            } else {\n\t                                // slow case, need to parse attributes\n\t                                // TODO(felix8a): do we really care about misparsing this?\n\t                                pos = parseEndTag(parts, pos, h, param, continuationMarker, state);\n\t                            }\n\t                        } else {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&lt;/', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '<':\n\t                        if (m = /^([-\\w:]+)\\s*\\/?/.exec(next)) {\n\t                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n\t                                // fast case, no attribute parsing needed\n\t                                pos += 2;\n\t                                tagName = m[1].toLowerCase();\n\t                                if (h.startTag) {\n\t                                    h.startTag(tagName, [], param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                                }\n\t                                // tags like <script> and <textarea> have special parsing\n\t                                var eflags = html4.ELEMENTS[tagName];\n\t                                if (eflags & EFLAGS_TEXT) {\n\t                                    var tag = { name: tagName, next: pos, eflags: eflags };\n\t                                    pos = parseText(parts, tag, h, param, continuationMarker, state);\n\t                                }\n\t                            } else {\n\t                                // slow case, need to parse attributes\n\t                                pos = parseStartTag(parts, pos, h, param, continuationMarker, state);\n\t                            }\n\t                        } else {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&lt;', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '<\\!--':\n\t                        // The pathological case is n copies of '<\\!--' without '-->', and\n\t                        // repeated failure to find '-->' is quadratic.  We avoid that by\n\t                        // remembering when search for '-->' fails.\n\t                        if (!state.noMoreEndComments) {\n\t                            // A comment <\\!--x--> is split into three tokens:\n\t                            //   '<\\!--', 'x--', '>'\n\t                            // We want to find the next '>' token that has a preceding '--'.\n\t                            // pos is at the 'x--'.\n\t                            for (p = pos + 1; p < end; p++) {\n\t                                if (parts[p] === '>' && /--$/.test(parts[p - 1])) {\n\t                                    break;\n\t                                }\n\t                            }\n\t                            if (p < end) {\n\t                                if (h.comment) {\n\t                                    var comment = parts.slice(pos, p).join('');\n\t                                    h.comment(comment.substr(0, comment.length - 2), param, continuationMarker, continuationMaker(h, parts, p + 1, state, param));\n\t                                }\n\t                                pos = p + 1;\n\t                            } else {\n\t                                state.noMoreEndComments = true;\n\t                            }\n\t                        }\n\t                        if (state.noMoreEndComments) {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&lt;!--', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '<\\!':\n\t                        if (!/^\\w/.test(next)) {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&lt;!', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        } else {\n\t                            // similar to noMoreEndComment logic\n\t                            if (!state.noMoreGT) {\n\t                                for (p = pos + 1; p < end; p++) {\n\t                                    if (parts[p] === '>') {\n\t                                        break;\n\t                                    }\n\t                                }\n\t                                if (p < end) {\n\t                                    pos = p + 1;\n\t                                } else {\n\t                                    state.noMoreGT = true;\n\t                                }\n\t                            }\n\t                            if (state.noMoreGT) {\n\t                                if (h.pcdata) {\n\t                                    h.pcdata('&lt;!', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                                }\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '<?':\n\t                        // similar to noMoreEndComment logic\n\t                        if (!state.noMoreGT) {\n\t                            for (p = pos + 1; p < end; p++) {\n\t                                if (parts[p] === '>') {\n\t                                    break;\n\t                                }\n\t                            }\n\t                            if (p < end) {\n\t                                pos = p + 1;\n\t                            } else {\n\t                                state.noMoreGT = true;\n\t                            }\n\t                        }\n\t                        if (state.noMoreGT) {\n\t                            if (h.pcdata) {\n\t                                h.pcdata('&lt;?', param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                            }\n\t                        }\n\t                        break;\n\t                    case '>':\n\t                        if (h.pcdata) {\n\t                            h.pcdata(\"&gt;\", param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                        }\n\t                        break;\n\t                    case '':\n\t                        break;\n\t                    default:\n\t                        if (h.pcdata) {\n\t                            h.pcdata(current, param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t            if (h.endDoc) {\n\t                h.endDoc(param);\n\t            }\n\t        } catch (e) {\n\t            if (e !== continuationMarker) {\n\t                throw e;\n\t            }\n\t        }\n\t    }\n\t\n\t    // Split str into parts for the html parser.\n\t    function htmlSplit(str) {\n\t        // can't hoist this out of the function because of the re.exec loop.\n\t        var re = /(<\\/|<\\!--|<[!?]|[&<>])/g;\n\t        str += '';\n\t        if (splitWillCapture) {\n\t            return str.split(re);\n\t        } else {\n\t            var parts = [];\n\t            var lastPos = 0;\n\t            var m;\n\t            while ((m = re.exec(str)) !== null) {\n\t                parts.push(str.substring(lastPos, m.index));\n\t                parts.push(m[0]);\n\t                lastPos = m.index + m[0].length;\n\t            }\n\t            parts.push(str.substring(lastPos));\n\t            return parts;\n\t        }\n\t    }\n\t\n\t    function parseEndTag(parts, pos, h, param, continuationMarker, state) {\n\t        var tag = parseTagAndAttrs(parts, pos);\n\t        // drop unclosed tags\n\t        if (!tag) {\n\t            return parts.length;\n\t        }\n\t        if (h.endTag) {\n\t            h.endTag(tag.name, param, continuationMarker, continuationMaker(h, parts, pos, state, param));\n\t        }\n\t        return tag.next;\n\t    }\n\t\n\t    function parseStartTag(parts, pos, h, param, continuationMarker, state) {\n\t        var tag = parseTagAndAttrs(parts, pos);\n\t        // drop unclosed tags\n\t        if (!tag) {\n\t            return parts.length;\n\t        }\n\t        if (h.startTag) {\n\t            h.startTag(tag.name, tag.attrs, param, continuationMarker, continuationMaker(h, parts, tag.next, state, param));\n\t        }\n\t        // tags like <script> and <textarea> have special parsing\n\t        if (tag.eflags & EFLAGS_TEXT) {\n\t            return parseText(parts, tag, h, param, continuationMarker, state);\n\t        } else {\n\t            return tag.next;\n\t        }\n\t    }\n\t\n\t    var endTagRe = {};\n\t\n\t    // Tags like <script> and <textarea> are flagged as CDATA or RCDATA,\n\t    // which means everything is text until we see the correct closing tag.\n\t    function parseText(parts, tag, h, param, continuationMarker, state) {\n\t        var end = parts.length;\n\t        if (!endTagRe.hasOwnProperty(tag.name)) {\n\t            endTagRe[tag.name] = new RegExp('^' + tag.name + '(?:[\\\\s\\\\/]|$)', 'i');\n\t        }\n\t        var re = endTagRe[tag.name];\n\t        var first = tag.next;\n\t        var p = tag.next + 1;\n\t        for (; p < end; p++) {\n\t            if (parts[p - 1] === '<\\/' && re.test(parts[p])) {\n\t                break;\n\t            }\n\t        }\n\t        if (p < end) {\n\t            p -= 1;\n\t        }\n\t        var buf = parts.slice(first, p).join('');\n\t        if (tag.eflags & html4.eflags['CDATA']) {\n\t            if (h.cdata) {\n\t                h.cdata(buf, param, continuationMarker, continuationMaker(h, parts, p, state, param));\n\t            }\n\t        } else if (tag.eflags & html4.eflags['RCDATA']) {\n\t            if (h.rcdata) {\n\t                h.rcdata(normalizeRCData(buf), param, continuationMarker, continuationMaker(h, parts, p, state, param));\n\t            }\n\t        } else {\n\t            throw new Error('bug');\n\t        }\n\t        return p;\n\t    }\n\t\n\t    // at this point, parts[pos-1] is either \"<\" or \"<\\/\".\n\t    function parseTagAndAttrs(parts, pos) {\n\t        var m = /^([-\\w:]+)/.exec(parts[pos]);\n\t        var tag = {};\n\t        tag.name = m[1].toLowerCase();\n\t        tag.eflags = html4.ELEMENTS[tag.name];\n\t        var buf = parts[pos].substr(m[0].length);\n\t        // Find the next '>'.  We optimistically assume this '>' is not in a\n\t        // quoted context, and further down we fix things up if it turns out to\n\t        // be quoted.\n\t        var p = pos + 1;\n\t        var end = parts.length;\n\t        for (; p < end; p++) {\n\t            if (parts[p] === '>') {\n\t                break;\n\t            }\n\t            buf += parts[p];\n\t        }\n\t        if (end <= p) {\n\t            return void 0;\n\t        }\n\t        var attrs = [];\n\t        while (buf !== '') {\n\t            m = ATTR_RE.exec(buf);\n\t            if (!m) {\n\t                // No attribute found: skip garbage\n\t                buf = buf.replace(/^[\\s\\S][^a-z\\s]*/, '');\n\t            } else if (m[4] && !m[5] || m[6] && !m[7]) {\n\t                // Unterminated quote: slurp to the next unquoted '>'\n\t                var quote = m[4] || m[6];\n\t                var sawQuote = false;\n\t                var abuf = [buf, parts[p++]];\n\t                for (; p < end; p++) {\n\t                    if (sawQuote) {\n\t                        if (parts[p] === '>') {\n\t                            break;\n\t                        }\n\t                    } else if (0 <= parts[p].indexOf(quote)) {\n\t                        sawQuote = true;\n\t                    }\n\t                    abuf.push(parts[p]);\n\t                }\n\t                // Slurp failed: lose the garbage\n\t                if (end <= p) {\n\t                    break;\n\t                }\n\t                // Otherwise retry attribute parsing\n\t                buf = abuf.join('');\n\t                continue;\n\t            } else {\n\t                // We have an attribute\n\t                var aName = m[1].toLowerCase();\n\t                var aValue = m[2] ? decodeValue(m[3]) : '';\n\t                attrs.push(aName, aValue);\n\t                buf = buf.substr(m[0].length);\n\t            }\n\t        }\n\t        tag.attrs = attrs;\n\t        tag.next = p + 1;\n\t        return tag;\n\t    }\n\t\n\t    function decodeValue(v) {\n\t        var q = v.charCodeAt(0);\n\t        if (q === 0x22 || q === 0x27) {\n\t            // \" or '\n\t            v = v.substr(1, v.length - 2);\n\t        }\n\t        return unescapeEntities(stripNULs(v));\n\t    }\n\t\n\t    /**\n\t     * Returns a function that strips unsafe tags and attributes from html.\n\t     * @param {defs.TagPolicy} tagPolicy\n\t     *     A function that takes (tagName, attribs[]), where tagName is a key in\n\t     *     html4.ELEMENTS and attribs is an array of alternating attribute names\n\t     *     and values.  It should return a record (as follows), or null to delete\n\t     *     the element.  It's okay for tagPolicy to modify the attribs array,\n\t     *     but the same array is reused, so it should not be held between calls.\n\t     *     Record keys:\n\t     *        attribs: (required) Sanitized attributes array.\n\t     *        tagName: Replacement tag name.\n\t     * @return {function(string, Array)} A function that sanitizes a string of\n\t     *     HTML and appends result strings to the second argument, an array.\n\t     */\n\t    function makeHtmlSanitizer(tagPolicy) {\n\t        var stack;\n\t        var ignoring;\n\t        var emit = function emit(text, out) {\n\t            if (!ignoring) {\n\t                out.push(text);\n\t            }\n\t        };\n\t        return makeSaxParser({\n\t            'startDoc': function startDoc(_) {\n\t                stack = [];\n\t                ignoring = false;\n\t            },\n\t            'startTag': function startTag(tagNameOrig, attribs, out) {\n\t                if (ignoring) {\n\t                    return;\n\t                }\n\t                if (!html4.ELEMENTS.hasOwnProperty(tagNameOrig)) {\n\t                    return;\n\t                }\n\t                var eflagsOrig = html4.ELEMENTS[tagNameOrig];\n\t                if (eflagsOrig & html4.eflags['FOLDABLE']) {\n\t                    return;\n\t                }\n\t\n\t                var decision = tagPolicy(tagNameOrig, attribs);\n\t                if (!decision) {\n\t                    ignoring = !(eflagsOrig & html4.eflags['EMPTY']);\n\t                    return;\n\t                } else if ((typeof decision === 'undefined' ? 'undefined' : _typeof(decision)) !== 'object') {\n\t                    throw new Error('tagPolicy did not return object (old API?)');\n\t                }\n\t                if ('attribs' in decision) {\n\t                    attribs = decision['attribs'];\n\t                } else {\n\t                    throw new Error('tagPolicy gave no attribs');\n\t                }\n\t                var eflagsRep;\n\t                var tagNameRep;\n\t                if ('tagName' in decision) {\n\t                    tagNameRep = decision['tagName'];\n\t                    eflagsRep = html4.ELEMENTS[tagNameRep];\n\t                } else {\n\t                    tagNameRep = tagNameOrig;\n\t                    eflagsRep = eflagsOrig;\n\t                }\n\t                // TODO(mikesamuel): relying on tagPolicy not to insert unsafe\n\t                // attribute names.\n\t\n\t                // If this is an optional-end-tag element and either this element or its\n\t                // previous like sibling was rewritten, then insert a close tag to\n\t                // preserve structure.\n\t                if (eflagsOrig & html4.eflags['OPTIONAL_ENDTAG']) {\n\t                    var onStack = stack[stack.length - 1];\n\t                    if (onStack && onStack.orig === tagNameOrig && (onStack.rep !== tagNameRep || tagNameOrig !== tagNameRep)) {\n\t                        out.push('<\\/', onStack.rep, '>');\n\t                    }\n\t                }\n\t\n\t                if (!(eflagsOrig & html4.eflags['EMPTY'])) {\n\t                    stack.push({ orig: tagNameOrig, rep: tagNameRep });\n\t                }\n\t\n\t                out.push('<', tagNameRep);\n\t                for (var i = 0, n = attribs.length; i < n; i += 2) {\n\t                    var attribName = attribs[i],\n\t                        value = attribs[i + 1];\n\t                    if (value !== null && value !== void 0) {\n\t                        out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n\t                    }\n\t                }\n\t                out.push('>');\n\t\n\t                if (eflagsOrig & html4.eflags['EMPTY'] && !(eflagsRep & html4.eflags['EMPTY'])) {\n\t                    // replacement is non-empty, synthesize end tag\n\t                    out.push('<\\/', tagNameRep, '>');\n\t                }\n\t            },\n\t            'endTag': function endTag(tagName, out) {\n\t                if (ignoring) {\n\t                    ignoring = false;\n\t                    return;\n\t                }\n\t                if (!html4.ELEMENTS.hasOwnProperty(tagName)) {\n\t                    return;\n\t                }\n\t                var eflags = html4.ELEMENTS[tagName];\n\t                if (!(eflags & (html4.eflags['EMPTY'] | html4.eflags['FOLDABLE']))) {\n\t                    var index;\n\t                    if (eflags & html4.eflags['OPTIONAL_ENDTAG']) {\n\t                        for (index = stack.length; --index >= 0;) {\n\t                            var stackElOrigTag = stack[index].orig;\n\t                            if (stackElOrigTag === tagName) {\n\t                                break;\n\t                            }\n\t                            if (!(html4.ELEMENTS[stackElOrigTag] & html4.eflags['OPTIONAL_ENDTAG'])) {\n\t                                // Don't pop non optional end tags looking for a match.\n\t                                return;\n\t                            }\n\t                        }\n\t                    } else {\n\t                        for (index = stack.length; --index >= 0;) {\n\t                            if (stack[index].orig === tagName) {\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                    if (index < 0) {\n\t                        return;\n\t                    } // Not opened.\n\t                    for (var i = stack.length; --i > index;) {\n\t                        var stackElRepTag = stack[i].rep;\n\t                        if (!(html4.ELEMENTS[stackElRepTag] & html4.eflags['OPTIONAL_ENDTAG'])) {\n\t                            out.push('<\\/', stackElRepTag, '>');\n\t                        }\n\t                    }\n\t                    if (index < stack.length) {\n\t                        tagName = stack[index].rep;\n\t                    }\n\t                    stack.length = index;\n\t                    out.push('<\\/', tagName, '>');\n\t                }\n\t            },\n\t            'pcdata': emit,\n\t            'rcdata': emit,\n\t            'cdata': emit,\n\t            'endDoc': function endDoc(out) {\n\t                for (; stack.length; stack.length--) {\n\t                    out.push('<\\/', stack[stack.length - 1].rep, '>');\n\t                }\n\t            }\n\t        });\n\t    }\n\t\n\t    var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\t\n\t    function safeUri(uri, effect, ltype, hints, naiveUriRewriter) {\n\t        if (!naiveUriRewriter) {\n\t            return null;\n\t        }\n\t        try {\n\t            var parsed = URI.parse('' + uri);\n\t            if (parsed) {\n\t                if (!parsed.hasScheme() || ALLOWED_URI_SCHEMES.test(parsed.getScheme())) {\n\t                    var safe = naiveUriRewriter(parsed, effect, ltype, hints);\n\t                    return safe ? safe.toString() : null;\n\t                }\n\t            }\n\t        } catch (e) {\n\t            return null;\n\t        }\n\t        return null;\n\t    }\n\t\n\t    function log(logger, tagName, attribName, oldValue, newValue) {\n\t        if (!attribName) {\n\t            logger(tagName + \" removed\", {\n\t                change: \"removed\",\n\t                tagName: tagName\n\t            });\n\t        }\n\t        if (oldValue !== newValue) {\n\t            var changed = \"changed\";\n\t            if (oldValue && !newValue) {\n\t                changed = \"removed\";\n\t            } else if (!oldValue && newValue) {\n\t                changed = \"added\";\n\t            }\n\t            logger(tagName + \".\" + attribName + \" \" + changed, {\n\t                change: changed,\n\t                tagName: tagName,\n\t                attribName: attribName,\n\t                oldValue: oldValue,\n\t                newValue: newValue\n\t            });\n\t        }\n\t    }\n\t\n\t    function lookupAttribute(map, tagName, attribName) {\n\t        var attribKey;\n\t        attribKey = tagName + '::' + attribName;\n\t        if (map.hasOwnProperty(attribKey)) {\n\t            return map[attribKey];\n\t        }\n\t        attribKey = '*::' + attribName;\n\t        if (map.hasOwnProperty(attribKey)) {\n\t            return map[attribKey];\n\t        }\n\t        return void 0;\n\t    }\n\t    function getAttributeType(tagName, attribName) {\n\t        return lookupAttribute(html4.ATTRIBS, tagName, attribName);\n\t    }\n\t    function getLoaderType(tagName, attribName) {\n\t        return lookupAttribute(html4.LOADERTYPES, tagName, attribName);\n\t    }\n\t    function getUriEffect(tagName, attribName) {\n\t        return lookupAttribute(html4.URIEFFECTS, tagName, attribName);\n\t    }\n\t\n\t    /**\n\t     * Sanitizes attributes on an HTML tag.\n\t     * @param {string} tagName An HTML tag name in lowercase.\n\t     * @param {Array.<?string>} attribs An array of alternating names and values.\n\t     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n\t     *     apply to URI attributes; it can return a new string value, or null to\n\t     *     delete the attribute.  If unspecified, URI attributes are deleted.\n\t     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n\t     *     to attributes containing HTML names, element IDs, and space-separated\n\t     *     lists of classes; it can return a new string value, or null to delete\n\t     *     the attribute.  If unspecified, these attributes are kept unchanged.\n\t     * @return {Array.<?string>} The sanitized attributes as a list of alternating\n\t     *     names and values, where a null value means to omit the attribute.\n\t     */\n\t    function sanitizeAttribs(tagName, attribs, opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n\t        // TODO(felix8a): it's obnoxious that domado duplicates much of this\n\t        // TODO(felix8a): maybe consistently enforce constraints like target=\n\t        for (var i = 0; i < attribs.length; i += 2) {\n\t            var attribName = attribs[i];\n\t            var value = attribs[i + 1];\n\t            var oldValue = value;\n\t            var atype = null,\n\t                attribKey;\n\t            if ((attribKey = tagName + '::' + attribName, html4.ATTRIBS.hasOwnProperty(attribKey)) || (attribKey = '*::' + attribName, html4.ATTRIBS.hasOwnProperty(attribKey))) {\n\t                atype = html4.ATTRIBS[attribKey];\n\t            }\n\t            if (atype !== null) {\n\t                switch (atype) {\n\t                    case html4.atype['NONE']:\n\t                        break;\n\t                    case html4.atype['SCRIPT']:\n\t                        value = null;\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                    case html4.atype['STYLE']:\n\t                        if ('undefined' === typeof parseCssDeclarations) {\n\t                            value = null;\n\t                            if (opt_logger) {\n\t                                log(opt_logger, tagName, attribName, oldValue, value);\n\t                            }\n\t                            break;\n\t                        }\n\t                        var sanitizedDeclarations = [];\n\t                        parseCssDeclarations(value, {\n\t                            'declaration': function declaration(property, tokens) {\n\t                                var normProp = property.toLowerCase();\n\t                                sanitizeCssProperty(normProp, tokens, opt_naiveUriRewriter ? function (url) {\n\t                                    return safeUri(url, html4.ueffects.SAME_DOCUMENT, html4.ltypes.SANDBOXED, {\n\t                                        \"TYPE\": \"CSS\",\n\t                                        \"CSS_PROP\": normProp\n\t                                    }, opt_naiveUriRewriter);\n\t                                } : null);\n\t                                if (tokens.length) {\n\t                                    sanitizedDeclarations.push(normProp + ': ' + tokens.join(' '));\n\t                                }\n\t                            }\n\t                        });\n\t                        value = sanitizedDeclarations.length > 0 ? sanitizedDeclarations.join(' ; ') : null;\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                    case html4.atype['ID']:\n\t                    case html4.atype['IDREF']:\n\t                    case html4.atype['IDREFS']:\n\t                    case html4.atype['GLOBAL_NAME']:\n\t                    case html4.atype['LOCAL_NAME']:\n\t                    case html4.atype['CLASSES']:\n\t                        value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                    case html4.atype['URI']:\n\t                        value = safeUri(value, getUriEffect(tagName, attribName), getLoaderType(tagName, attribName), {\n\t                            \"TYPE\": \"MARKUP\",\n\t                            \"XML_ATTR\": attribName,\n\t                            \"XML_TAG\": tagName\n\t                        }, opt_naiveUriRewriter);\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                    case html4.atype['URI_FRAGMENT']:\n\t                        if (value && '#' === value.charAt(0)) {\n\t                            value = value.substring(1); // remove the leading '#'\n\t                            value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n\t                            if (value !== null && value !== void 0) {\n\t                                value = '#' + value; // restore the leading '#'\n\t                            }\n\t                        } else {\n\t                                value = null;\n\t                            }\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                    default:\n\t                        value = null;\n\t                        if (opt_logger) {\n\t                            log(opt_logger, tagName, attribName, oldValue, value);\n\t                        }\n\t                        break;\n\t                }\n\t            } else {\n\t                value = null;\n\t                if (opt_logger) {\n\t                    log(opt_logger, tagName, attribName, oldValue, value);\n\t                }\n\t            }\n\t            attribs[i + 1] = value;\n\t        }\n\t        return attribs;\n\t    }\n\t\n\t    /**\n\t     * Creates a tag policy that omits all tags marked UNSAFE in html4-defs.js\n\t     * and applies the default attribute sanitizer with the supplied policy for\n\t     * URI attributes and NMTOKEN attributes.\n\t     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n\t     *     apply to URI attributes.  If not given, URI attributes are deleted.\n\t     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n\t     *     to attributes containing HTML names, element IDs, and space-separated\n\t     *     lists of classes.  If not given, such attributes are left unchanged.\n\t     * @return {defs.TagPolicy} A tagPolicy suitable for\n\t     *     passing to html.sanitize.\n\t     */\n\t    function makeTagPolicy(opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n\t        return function (tagName, attribs) {\n\t            if (!(html4.ELEMENTS[tagName] & html4.eflags['UNSAFE'])) {\n\t                return {\n\t                    'attribs': sanitizeAttribs(tagName, attribs, opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger)\n\t                };\n\t            } else {\n\t                if (opt_logger) {\n\t                    log(opt_logger, tagName, undefined, undefined, undefined);\n\t                }\n\t            }\n\t        };\n\t    }\n\t\n\t    /**\n\t     * Sanitizes HTML tags and attributes according to a given policy.\n\t     * @param {string} inputHtml The HTML to sanitize.\n\t     * @param {function(string, Array.<?string>)} tagPolicy A function that\n\t     *     decides which tags to accept and sanitizes their attributes (see\n\t     *     makeHtmlSanitizer above for details).\n\t     * @return {string} The sanitized HTML.\n\t     */\n\t    function sanitizeWithPolicy(inputHtml, tagPolicy) {\n\t        var outputArray = [];\n\t        makeHtmlSanitizer(tagPolicy)(inputHtml, outputArray);\n\t        return outputArray.join('');\n\t    }\n\t\n\t    /**\n\t     * Strips unsafe tags and attributes from HTML.\n\t     * @param {string} inputHtml The HTML to sanitize.\n\t     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n\t     *     apply to URI attributes.  If not given, URI attributes are deleted.\n\t     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n\t     *     to attributes containing HTML names, element IDs, and space-separated\n\t     *     lists of classes.  If not given, such attributes are left unchanged.\n\t     */\n\t    function sanitize(inputHtml, opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n\t        var tagPolicy = makeTagPolicy(opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n\t        return sanitizeWithPolicy(inputHtml, tagPolicy);\n\t    }\n\t\n\t    // Export both quoted and unquoted names for Closure linkage.\n\t    var html = {};\n\t    html.escapeAttrib = html['escapeAttrib'] = escapeAttrib;\n\t    html.makeHtmlSanitizer = html['makeHtmlSanitizer'] = makeHtmlSanitizer;\n\t    html.makeSaxParser = html['makeSaxParser'] = makeSaxParser;\n\t    html.makeTagPolicy = html['makeTagPolicy'] = makeTagPolicy;\n\t    html.normalizeRCData = html['normalizeRCData'] = normalizeRCData;\n\t    html.sanitize = html['sanitize'] = sanitize;\n\t    html.sanitizeAttribs = html['sanitizeAttribs'] = sanitizeAttribs;\n\t    html.sanitizeWithPolicy = html['sanitizeWithPolicy'] = sanitizeWithPolicy;\n\t    html.unescapeEntities = html['unescapeEntities'] = unescapeEntities;\n\t    return html;\n\t}(_html4Defs.html4);\n\t\n\tvar htmlSanitize = exports.htmlSanitize = html['sanitize'];\n\t\n\t// Exports for Closure compiler.  Note this file is also cajoled\n\t// for domado and run in an environment without 'window'\n\t// if (typeof window !== 'undefined') {\n\t//     window['html'] = html;\n\t//     window['html_sanitize'] = html_sanitize;\n\t// }\n\n\t/* eslint-enable */\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/* eslint-disable */\n\t\n\t// Copyright Google Inc.\n\t// Licensed under the Apache Licence Version 2.0\n\t// Autogenerated at Thu Jun 02 04:35:24 MSK 2016\n\t// @overrides window\n\t// @provides html4\n\tvar html4 = exports.html4 = {};\n\thtml4.atype = {\n\t  'NONE': 0,\n\t  'URI': 1,\n\t  'URI_FRAGMENT': 11,\n\t  'SCRIPT': 2,\n\t  'STYLE': 3,\n\t  'HTML': 12,\n\t  'ID': 4,\n\t  'IDREF': 5,\n\t  'IDREFS': 6,\n\t  'GLOBAL_NAME': 7,\n\t  'LOCAL_NAME': 8,\n\t  'CLASSES': 9,\n\t  'FRAME_TARGET': 10,\n\t  'MEDIA_QUERY': 13\n\t};\n\thtml4['atype'] = html4.atype;\n\thtml4.ATTRIBS = {\n\t  '*::class': 9,\n\t  '*::dir': 0,\n\t  '*::draggable': 0,\n\t  '*::hidden': 0,\n\t  '*::id': 4,\n\t  '*::inert': 0,\n\t  '*::itemprop': 0,\n\t  '*::itemref': 6,\n\t  '*::itemscope': 0,\n\t  '*::lang': 0,\n\t  '*::onblur': 2,\n\t  '*::onchange': 2,\n\t  '*::onclick': 2,\n\t  '*::ondblclick': 2,\n\t  '*::onerror': 2,\n\t  '*::onfocus': 2,\n\t  '*::onkeydown': 2,\n\t  '*::onkeypress': 2,\n\t  '*::onkeyup': 2,\n\t  '*::onload': 2,\n\t  '*::onmousedown': 2,\n\t  '*::onmousemove': 2,\n\t  '*::onmouseout': 2,\n\t  '*::onmouseover': 2,\n\t  '*::onmouseup': 2,\n\t  '*::onreset': 2,\n\t  '*::onscroll': 2,\n\t  '*::onselect': 2,\n\t  '*::onsubmit': 2,\n\t  '*::ontouchcancel': 2,\n\t  '*::ontouchend': 2,\n\t  '*::ontouchenter': 2,\n\t  '*::ontouchleave': 2,\n\t  '*::ontouchmove': 2,\n\t  '*::ontouchstart': 2,\n\t  '*::onunload': 2,\n\t  '*::spellcheck': 0,\n\t  '*::style': 3,\n\t  '*::tabindex': 0,\n\t  '*::title': 0,\n\t  '*::translate': 0,\n\t  'a::accesskey': 0,\n\t  'a::coords': 0,\n\t  'a::href': 1,\n\t  'a::hreflang': 0,\n\t  'a::name': 7,\n\t  'a::onblur': 2,\n\t  'a::onfocus': 2,\n\t  'a::shape': 0,\n\t  'a::target': 10,\n\t  'a::type': 0,\n\t  'area::accesskey': 0,\n\t  'area::alt': 0,\n\t  'area::coords': 0,\n\t  'area::href': 1,\n\t  'area::nohref': 0,\n\t  'area::onblur': 2,\n\t  'area::onfocus': 2,\n\t  'area::shape': 0,\n\t  'area::target': 10,\n\t  'audio::controls': 0,\n\t  'audio::loop': 0,\n\t  'audio::mediagroup': 5,\n\t  'audio::muted': 0,\n\t  'audio::preload': 0,\n\t  'audio::src': 1,\n\t  'bdo::dir': 0,\n\t  'blockquote::cite': 1,\n\t  'br::clear': 0,\n\t  'button::accesskey': 0,\n\t  'button::disabled': 0,\n\t  'button::name': 8,\n\t  'button::onblur': 2,\n\t  'button::onfocus': 2,\n\t  'button::type': 0,\n\t  'button::value': 0,\n\t  'canvas::height': 0,\n\t  'canvas::width': 0,\n\t  'caption::align': 0,\n\t  'col::align': 0,\n\t  'col::char': 0,\n\t  'col::charoff': 0,\n\t  'col::span': 0,\n\t  'col::valign': 0,\n\t  'col::width': 0,\n\t  'colgroup::align': 0,\n\t  'colgroup::char': 0,\n\t  'colgroup::charoff': 0,\n\t  'colgroup::span': 0,\n\t  'colgroup::valign': 0,\n\t  'colgroup::width': 0,\n\t  'command::checked': 0,\n\t  'command::command': 5,\n\t  'command::disabled': 0,\n\t  'command::icon': 1,\n\t  'command::label': 0,\n\t  'command::radiogroup': 0,\n\t  'command::type': 0,\n\t  'data::value': 0,\n\t  'del::cite': 1,\n\t  'del::datetime': 0,\n\t  'details::open': 0,\n\t  'dir::compact': 0,\n\t  'div::align': 0,\n\t  'dl::compact': 0,\n\t  'fieldset::disabled': 0,\n\t  'font::color': 0,\n\t  'font::face': 0,\n\t  'font::size': 0,\n\t  'form::accept': 0,\n\t  'form::action': 1,\n\t  'form::autocomplete': 0,\n\t  'form::enctype': 0,\n\t  'form::method': 0,\n\t  'form::name': 7,\n\t  'form::novalidate': 0,\n\t  'form::onreset': 2,\n\t  'form::onsubmit': 2,\n\t  'form::target': 10,\n\t  'h1::align': 0,\n\t  'h2::align': 0,\n\t  'h3::align': 0,\n\t  'h4::align': 0,\n\t  'h5::align': 0,\n\t  'h6::align': 0,\n\t  'hr::align': 0,\n\t  'hr::noshade': 0,\n\t  'hr::size': 0,\n\t  'hr::width': 0,\n\t  'iframe::align': 0,\n\t  'iframe::frameborder': 0,\n\t  'iframe::height': 0,\n\t  'iframe::marginheight': 0,\n\t  'iframe::marginwidth': 0,\n\t  'iframe::width': 0,\n\t  'img::align': 0,\n\t  'img::alt': 0,\n\t  'img::border': 0,\n\t  'img::height': 0,\n\t  'img::hspace': 0,\n\t  'img::ismap': 0,\n\t  'img::name': 7,\n\t  'img::src': 9,\n\t  'img::usemap': 11,\n\t  'img::vspace': 0,\n\t  'img::width': 0,\n\t  'input::accept': 0,\n\t  'input::accesskey': 0,\n\t  'input::align': 0,\n\t  'input::alt': 0,\n\t  'input::autocomplete': 0,\n\t  'input::checked': 0,\n\t  'input::disabled': 0,\n\t  'input::inputmode': 0,\n\t  'input::ismap': 0,\n\t  'input::list': 5,\n\t  'input::max': 0,\n\t  'input::maxlength': 0,\n\t  'input::min': 0,\n\t  'input::multiple': 0,\n\t  'input::name': 8,\n\t  'input::onblur': 2,\n\t  'input::onchange': 2,\n\t  'input::onfocus': 2,\n\t  'input::onselect': 2,\n\t  'input::pattern': 0,\n\t  'input::placeholder': 0,\n\t  'input::readonly': 0,\n\t  'input::required': 0,\n\t  'input::size': 0,\n\t  'input::src': 1,\n\t  'input::step': 0,\n\t  'input::type': 0,\n\t  'input::usemap': 11,\n\t  'input::value': 0,\n\t  'ins::cite': 1,\n\t  'ins::datetime': 0,\n\t  'label::accesskey': 0,\n\t  'label::for': 5,\n\t  'label::onblur': 2,\n\t  'label::onfocus': 2,\n\t  'legend::accesskey': 0,\n\t  'legend::align': 0,\n\t  'li::type': 0,\n\t  'li::value': 0,\n\t  'map::name': 7,\n\t  'menu::compact': 0,\n\t  'menu::label': 0,\n\t  'menu::type': 0,\n\t  'meter::high': 0,\n\t  'meter::low': 0,\n\t  'meter::max': 0,\n\t  'meter::min': 0,\n\t  'meter::optimum': 0,\n\t  'meter::value': 0,\n\t  'ol::compact': 0,\n\t  'ol::reversed': 0,\n\t  'ol::start': 0,\n\t  'ol::type': 0,\n\t  'optgroup::disabled': 0,\n\t  'optgroup::label': 0,\n\t  'option::disabled': 0,\n\t  'option::label': 0,\n\t  'option::selected': 0,\n\t  'option::value': 0,\n\t  'output::for': 6,\n\t  'output::name': 8,\n\t  'p::align': 0,\n\t  'pre::width': 0,\n\t  'progress::max': 0,\n\t  'progress::min': 0,\n\t  'progress::value': 0,\n\t  'q::cite': 1,\n\t  'select::autocomplete': 0,\n\t  'select::disabled': 0,\n\t  'select::multiple': 0,\n\t  'select::name': 8,\n\t  'select::onblur': 2,\n\t  'select::onchange': 2,\n\t  'select::onfocus': 2,\n\t  'select::required': 0,\n\t  'select::size': 0,\n\t  'source::type': 0,\n\t  'table::align': 0,\n\t  'table::bgcolor': 0,\n\t  'table::border': 0,\n\t  'table::cellpadding': 0,\n\t  'table::cellspacing': 0,\n\t  'table::frame': 0,\n\t  'table::rules': 0,\n\t  'table::summary': 0,\n\t  'table::width': 0,\n\t  'tbody::align': 0,\n\t  'tbody::char': 0,\n\t  'tbody::charoff': 0,\n\t  'tbody::valign': 0,\n\t  'td::abbr': 0,\n\t  'td::align': 0,\n\t  'td::axis': 0,\n\t  'td::bgcolor': 0,\n\t  'td::char': 0,\n\t  'td::charoff': 0,\n\t  'td::colspan': 0,\n\t  'td::headers': 6,\n\t  'td::height': 0,\n\t  'td::nowrap': 0,\n\t  'td::rowspan': 0,\n\t  'td::scope': 0,\n\t  'td::valign': 0,\n\t  'td::width': 0,\n\t  'textarea::accesskey': 0,\n\t  'textarea::autocomplete': 0,\n\t  'textarea::cols': 0,\n\t  'textarea::disabled': 0,\n\t  'textarea::inputmode': 0,\n\t  'textarea::name': 8,\n\t  'textarea::onblur': 2,\n\t  'textarea::onchange': 2,\n\t  'textarea::onfocus': 2,\n\t  'textarea::onselect': 2,\n\t  'textarea::placeholder': 0,\n\t  'textarea::readonly': 0,\n\t  'textarea::required': 0,\n\t  'textarea::rows': 0,\n\t  'textarea::wrap': 0,\n\t  'tfoot::align': 0,\n\t  'tfoot::char': 0,\n\t  'tfoot::charoff': 0,\n\t  'tfoot::valign': 0,\n\t  'th::abbr': 0,\n\t  'th::align': 0,\n\t  'th::axis': 0,\n\t  'th::bgcolor': 0,\n\t  'th::char': 0,\n\t  'th::charoff': 0,\n\t  'th::colspan': 0,\n\t  'th::headers': 6,\n\t  'th::height': 0,\n\t  'th::nowrap': 0,\n\t  'th::rowspan': 0,\n\t  'th::scope': 0,\n\t  'th::valign': 0,\n\t  'th::width': 0,\n\t  'thead::align': 0,\n\t  'thead::char': 0,\n\t  'thead::charoff': 0,\n\t  'thead::valign': 0,\n\t  'tr::align': 0,\n\t  'tr::bgcolor': 0,\n\t  'tr::char': 0,\n\t  'tr::charoff': 0,\n\t  'tr::valign': 0,\n\t  'track::default': 0,\n\t  'track::kind': 0,\n\t  'track::label': 0,\n\t  'track::srclang': 0,\n\t  'ul::compact': 0,\n\t  'ul::type': 0,\n\t  'video::controls': 0,\n\t  'video::height': 0,\n\t  'video::loop': 0,\n\t  'video::mediagroup': 5,\n\t  'video::muted': 0,\n\t  'video::poster': 1,\n\t  'video::preload': 0,\n\t  'video::src': 1,\n\t  'video::width': 0\n\t};\n\thtml4['ATTRIBS'] = html4.ATTRIBS;\n\thtml4.eflags = {\n\t  'OPTIONAL_ENDTAG': 1,\n\t  'EMPTY': 2,\n\t  'CDATA': 4,\n\t  'RCDATA': 8,\n\t  'UNSAFE': 16,\n\t  'FOLDABLE': 32,\n\t  'SCRIPT': 64,\n\t  'STYLE': 128,\n\t  'VIRTUALIZED': 256\n\t};\n\thtml4['eflags'] = html4.eflags;\n\thtml4.ELEMENTS = {\n\t  'a': 0,\n\t  'abbr': 0,\n\t  'acronym': 0,\n\t  'address': 0,\n\t  'applet': 272,\n\t  'area': 2,\n\t  'article': 0,\n\t  'aside': 0,\n\t  'audio': 0,\n\t  'b': 0,\n\t  'base': 274,\n\t  'basefont': 274,\n\t  'bdi': 0,\n\t  'bdo': 0,\n\t  'big': 0,\n\t  'blockquote': 0,\n\t  'body': 305,\n\t  'br': 2,\n\t  'button': 0,\n\t  'canvas': 0,\n\t  'caption': 0,\n\t  'center': 0,\n\t  'cite': 0,\n\t  'code': 0,\n\t  'col': 2,\n\t  'colgroup': 1,\n\t  'command': 2,\n\t  'data': 0,\n\t  'datalist': 0,\n\t  'dd': 1,\n\t  'del': 0,\n\t  'details': 0,\n\t  'dfn': 0,\n\t  'dialog': 272,\n\t  'dir': 0,\n\t  'div': 0,\n\t  'dl': 0,\n\t  'dt': 1,\n\t  'em': 0,\n\t  'fieldset': 0,\n\t  'figcaption': 0,\n\t  'figure': 0,\n\t  'font': 0,\n\t  'footer': 0,\n\t  'form': 0,\n\t  'frame': 274,\n\t  'frameset': 272,\n\t  'h1': 0,\n\t  'h2': 0,\n\t  'h3': 0,\n\t  'h4': 0,\n\t  'h5': 0,\n\t  'h6': 0,\n\t  'head': 305,\n\t  'header': 0,\n\t  'hgroup': 0,\n\t  'hr': 2,\n\t  'html': 305,\n\t  'i': 0,\n\t  // 'iframe': 4, // I don't want user to use iframe\n\t  'img': 2,\n\t  'input': 2,\n\t  'ins': 0,\n\t  'isindex': 274,\n\t  'kbd': 0,\n\t  'keygen': 274,\n\t  'label': 0,\n\t  'legend': 0,\n\t  'li': 1,\n\t  'link': 274,\n\t  'map': 0,\n\t  'mark': 0,\n\t  'menu': 0,\n\t  'meta': 274,\n\t  'meter': 0,\n\t  'nav': 0,\n\t  'nobr': 0,\n\t  'noembed': 276,\n\t  'noframes': 276,\n\t  'noscript': 276,\n\t  'object': 272,\n\t  'ol': 0,\n\t  'optgroup': 0,\n\t  'option': 1,\n\t  'output': 0,\n\t  'p': 1,\n\t  'param': 274,\n\t  'pre': 0,\n\t  'progress': 0,\n\t  'q': 0,\n\t  's': 0,\n\t  'samp': 0,\n\t  'script': 84,\n\t  'section': 0,\n\t  'select': 0,\n\t  'small': 0,\n\t  'source': 2,\n\t  'span': 0,\n\t  'strike': 0,\n\t  'strong': 0,\n\t  'style': 148,\n\t  'sub': 0,\n\t  'summary': 0,\n\t  'sup': 0,\n\t  'table': 0,\n\t  'tbody': 1,\n\t  'td': 1,\n\t  'textarea': 8,\n\t  'tfoot': 1,\n\t  'th': 1,\n\t  'thead': 1,\n\t  'time': 0,\n\t  'title': 280,\n\t  'tr': 1,\n\t  'track': 2,\n\t  'tt': 0,\n\t  'u': 0,\n\t  'ul': 0,\n\t  'var': 0,\n\t  'video': 0,\n\t  'wbr': 2\n\t};\n\thtml4['ELEMENTS'] = html4.ELEMENTS;\n\thtml4.ELEMENT_DOM_INTERFACES = {\n\t  'a': 'HTMLAnchorElement',\n\t  'abbr': 'HTMLElement',\n\t  'acronym': 'HTMLElement',\n\t  'address': 'HTMLElement',\n\t  'applet': 'HTMLAppletElement',\n\t  'area': 'HTMLAreaElement',\n\t  'article': 'HTMLElement',\n\t  'aside': 'HTMLElement',\n\t  'audio': 'HTMLAudioElement',\n\t  'b': 'HTMLElement',\n\t  'base': 'HTMLBaseElement',\n\t  'basefont': 'HTMLBaseFontElement',\n\t  'bdi': 'HTMLElement',\n\t  'bdo': 'HTMLElement',\n\t  'big': 'HTMLElement',\n\t  'blockquote': 'HTMLQuoteElement',\n\t  'body': 'HTMLBodyElement',\n\t  'br': 'HTMLBRElement',\n\t  'button': 'HTMLButtonElement',\n\t  'canvas': 'HTMLCanvasElement',\n\t  'caption': 'HTMLTableCaptionElement',\n\t  'center': 'HTMLElement',\n\t  'cite': 'HTMLElement',\n\t  'code': 'HTMLElement',\n\t  'col': 'HTMLTableColElement',\n\t  'colgroup': 'HTMLTableColElement',\n\t  'command': 'HTMLCommandElement',\n\t  'data': 'HTMLElement',\n\t  'datalist': 'HTMLDataListElement',\n\t  'dd': 'HTMLElement',\n\t  'del': 'HTMLModElement',\n\t  'details': 'HTMLDetailsElement',\n\t  'dfn': 'HTMLElement',\n\t  'dialog': 'HTMLDialogElement',\n\t  'dir': 'HTMLDirectoryElement',\n\t  'div': 'HTMLDivElement',\n\t  'dl': 'HTMLDListElement',\n\t  'dt': 'HTMLElement',\n\t  'em': 'HTMLElement',\n\t  'fieldset': 'HTMLFieldSetElement',\n\t  'figcaption': 'HTMLElement',\n\t  'figure': 'HTMLElement',\n\t  'font': 'HTMLFontElement',\n\t  'footer': 'HTMLElement',\n\t  'form': 'HTMLFormElement',\n\t  'frame': 'HTMLFrameElement',\n\t  'frameset': 'HTMLFrameSetElement',\n\t  'h1': 'HTMLHeadingElement',\n\t  'h2': 'HTMLHeadingElement',\n\t  'h3': 'HTMLHeadingElement',\n\t  'h4': 'HTMLHeadingElement',\n\t  'h5': 'HTMLHeadingElement',\n\t  'h6': 'HTMLHeadingElement',\n\t  'head': 'HTMLHeadElement',\n\t  'header': 'HTMLElement',\n\t  'hgroup': 'HTMLElement',\n\t  'hr': 'HTMLHRElement',\n\t  'html': 'HTMLHtmlElement',\n\t  'i': 'HTMLElement',\n\t  'iframe': 'HTMLIFrameElement',\n\t  'img': 'HTMLImageElement',\n\t  'input': 'HTMLInputElement',\n\t  'ins': 'HTMLModElement',\n\t  'isindex': 'HTMLUnknownElement',\n\t  'kbd': 'HTMLElement',\n\t  'keygen': 'HTMLKeygenElement',\n\t  'label': 'HTMLLabelElement',\n\t  'legend': 'HTMLLegendElement',\n\t  'li': 'HTMLLIElement',\n\t  'link': 'HTMLLinkElement',\n\t  'map': 'HTMLMapElement',\n\t  'mark': 'HTMLElement',\n\t  'menu': 'HTMLMenuElement',\n\t  'meta': 'HTMLMetaElement',\n\t  'meter': 'HTMLMeterElement',\n\t  'nav': 'HTMLElement',\n\t  'nobr': 'HTMLElement',\n\t  'noembed': 'HTMLElement',\n\t  'noframes': 'HTMLElement',\n\t  'noscript': 'HTMLElement',\n\t  'object': 'HTMLObjectElement',\n\t  'ol': 'HTMLOListElement',\n\t  'optgroup': 'HTMLOptGroupElement',\n\t  'option': 'HTMLOptionElement',\n\t  'output': 'HTMLOutputElement',\n\t  'p': 'HTMLParagraphElement',\n\t  'param': 'HTMLParamElement',\n\t  'pre': 'HTMLPreElement',\n\t  'progress': 'HTMLProgressElement',\n\t  'q': 'HTMLQuoteElement',\n\t  's': 'HTMLElement',\n\t  'samp': 'HTMLElement',\n\t  'script': 'HTMLScriptElement',\n\t  'section': 'HTMLElement',\n\t  'select': 'HTMLSelectElement',\n\t  'small': 'HTMLElement',\n\t  'source': 'HTMLSourceElement',\n\t  'span': 'HTMLSpanElement',\n\t  'strike': 'HTMLElement',\n\t  'strong': 'HTMLElement',\n\t  'style': 'HTMLStyleElement',\n\t  'sub': 'HTMLElement',\n\t  'summary': 'HTMLElement',\n\t  'sup': 'HTMLElement',\n\t  'table': 'HTMLTableElement',\n\t  'tbody': 'HTMLTableSectionElement',\n\t  'td': 'HTMLTableDataCellElement',\n\t  'textarea': 'HTMLTextAreaElement',\n\t  'tfoot': 'HTMLTableSectionElement',\n\t  'th': 'HTMLTableHeaderCellElement',\n\t  'thead': 'HTMLTableSectionElement',\n\t  'time': 'HTMLTimeElement',\n\t  'title': 'HTMLTitleElement',\n\t  'tr': 'HTMLTableRowElement',\n\t  'track': 'HTMLTrackElement',\n\t  'tt': 'HTMLElement',\n\t  'u': 'HTMLElement',\n\t  'ul': 'HTMLUListElement',\n\t  'var': 'HTMLElement',\n\t  'video': 'HTMLVideoElement',\n\t  'wbr': 'HTMLElement'\n\t};\n\thtml4['ELEMENT_DOM_INTERFACES'] = html4.ELEMENT_DOM_INTERFACES;\n\thtml4.ueffects = {\n\t  'NOT_LOADED': 0,\n\t  'SAME_DOCUMENT': 1,\n\t  'NEW_DOCUMENT': 2\n\t};\n\thtml4['ueffects'] = html4.ueffects;\n\thtml4.URIEFFECTS = {\n\t  'a::href': 2,\n\t  'area::href': 2,\n\t  'audio::src': 1,\n\t  'blockquote::cite': 0,\n\t  'command::icon': 1,\n\t  'del::cite': 0,\n\t  'form::action': 2,\n\t  'img::src': 1,\n\t  'input::src': 1,\n\t  'ins::cite': 0,\n\t  'q::cite': 0,\n\t  'video::poster': 1,\n\t  'video::src': 1\n\t};\n\thtml4['URIEFFECTS'] = html4.URIEFFECTS;\n\thtml4.ltypes = {\n\t  'UNSANDBOXED': 2,\n\t  'SANDBOXED': 1,\n\t  'DATA': 0\n\t};\n\thtml4['ltypes'] = html4.ltypes;\n\thtml4.LOADERTYPES = {\n\t  'a::href': 2,\n\t  'area::href': 2,\n\t  'audio::src': 2,\n\t  'blockquote::cite': 2,\n\t  'command::icon': 1,\n\t  'del::cite': 2,\n\t  'form::action': 2,\n\t  'img::src': 1,\n\t  'input::src': 1,\n\t  'ins::cite': 2,\n\t  'q::cite': 2,\n\t  'video::poster': 1,\n\t  'video::src': 2\n\t};\n\thtml4['LOADERTYPES'] = html4.LOADERTYPES;\n\t// export for Closure Compiler\n\t// if (typeof window !== 'undefined') {\n\t//   window['html4'] = html4;\n\t// }\n\n\t/* eslint-enable */\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.DialogBubble = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Component2 = __webpack_require__(4);\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _dialog = __webpack_require__(12);\n\t\n\tvar _templateEngine = __webpack_require__(6);\n\t\n\tvar _dialogList = __webpack_require__(15);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar DialogBubble = exports.DialogBubble = function (_Component) {\n\t    _inherits(DialogBubble, _Component);\n\t\n\t    function DialogBubble() {\n\t        _classCallCheck(this, DialogBubble);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(DialogBubble).call(this));\n\t\n\t        _this.side = '';\n\t        _this.message = '';\n\t        _this.type = null;\n\t        return _this;\n\t    }\n\t\n\t    _createClass(DialogBubble, [{\n\t        key: 'componentWillMount',\n\t        value: function componentWillMount() {\n\t            _dialogList.dialogList.addPhrase({\n\t                side: this.side,\n\t                message: this.message,\n\t                ref: this.type === _dialog.IS_TYPING ? this.refs.bubbleContainer : null,\n\t                type: this.type\n\t            });\n\t        }\n\t\n\t        /**\n\t         * Render bubble element\n\t         * @param data {Object}\n\t         * @param data.side {String} - 'user', 'chat'\n\t         * @param data.message {String}\n\t         * @param data.type {String} - 'is-typing'\n\t         * @returns {Object}\n\t         */\n\t\n\t    }, {\n\t        key: 'render',\n\t        value: function render(data) {\n\t            var bubbleClass = _general.LIB_NAME + '-dialog-bubble';\n\t            var bubbleContainerClass = _general.LIB_NAME + '-dialog-bubble-container';\n\t            var innerTemplate = '\\n            <div class=\"<% bubbleClass %>\">\\n                <div class=\"' + _general.LIB_NAME + '-dialog-bubble__text\">\\n                    <% message %>\\n                </div>\\n            </div>\\n        ';\n\t\n\t            this.side = data.side;\n\t            this.message = data.message;\n\t            this.type = data.type;\n\t\n\t            var bubbleClasses = [];\n\t            bubbleClasses.push(bubbleClass);\n\t            if (data.side) {\n\t                bubbleClasses.push(bubbleClass + '_' + data.side);\n\t            }\n\t            if (data.type) {\n\t                bubbleClasses.push(bubbleClass + '_' + data.type);\n\t            }\n\t            data.bubbleClass = bubbleClasses.join(' ');\n\t\n\t            return {\n\t                div: {\n\t                    className: bubbleContainerClass,\n\t                    innerHTML: (0, _templateEngine.templateEngine)(innerTemplate, data),\n\t                    ref: 'bubbleContainer'\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return DialogBubble;\n\t}(_Component2.Component);\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Input = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Component2 = __webpack_require__(4);\n\t\n\tvar _general = __webpack_require__(2);\n\t\n\tvar _dialog = __webpack_require__(12);\n\t\n\tvar _header = __webpack_require__(3);\n\t\n\tvar _templateEngine = __webpack_require__(6);\n\t\n\tvar _eventEmitter = __webpack_require__(7);\n\t\n\tvar _chatSettings = __webpack_require__(9);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Input = exports.Input = function (_Component) {\n\t    _inherits(Input, _Component);\n\t\n\t    function Input() {\n\t        _classCallCheck(this, Input);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Input).call(this));\n\t\n\t        _this.inputClass = _general.LIB_NAME + '-input__input-field';\n\t        _this.inputEl = null;\n\t\n\t        _this.onSubmit = function (event) {\n\t            event.preventDefault();\n\t            if (_this.inputEl.value !== '') {\n\t                _eventEmitter.eventEmitter.emit(_dialog.ADD_PHRASE, {\n\t                    side: _dialog.SIDE_USER,\n\t                    message: _this.inputEl.value\n\t                });\n\t                _this.inputEl.value = '';\n\t            }\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    _createClass(Input, [{\n\t        key: 'addEvents',\n\t        value: function addEvents() {\n\t            var _this2 = this;\n\t\n\t            _eventEmitter.eventEmitter.on(_header.OPEN_CHAT, function () {\n\t                if (!_this2.inputEl) {\n\t                    var $$inputEl = _this2.refs.inputForm.getElementsByClassName(_this2.inputClass);\n\t                    if ($$inputEl) {\n\t                        _this2.inputEl = $$inputEl[0];\n\t                    }\n\t                }\n\t                setTimeout(function () {\n\t                    _this2.inputEl.focus();\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            var data = {\n\t                sendText: _chatSettings.chatSettings.getProperty('sendText'),\n\t                inputPlaceholder: _chatSettings.chatSettings.getProperty('inputPlaceholder')\n\t            };\n\t\n\t            var id = _general.LIB_NAME + '-input';\n\t            var innerTemplate = '\\n            <div class=\"' + _general.LIB_NAME + '-input__cell\">\\n                <input type=\"text\" class=\"' + this.inputClass + '\" placeholder=\"<% inputPlaceholder %>\" />\\n            </div>\\n            <div class=\"' + _general.LIB_NAME + '-input__cell\">\\n                <button type=\"submit\" class=\"' + _general.LIB_NAME + '-input__send\">\\n                    <% sendText %>\\n                </button>\\n            </div>\\n        ';\n\t\n\t            this.addEvents();\n\t\n\t            return {\n\t                form: {\n\t                    id: id,\n\t                    innerHTML: (0, _templateEngine.templateEngine)(innerTemplate, data),\n\t                    ref: 'inputForm',\n\t                    submit: this.onSubmit\n\t                }\n\t            };\n\t        }\n\t    }]);\n\n\t    return Input;\n\t}(_Component2.Component);\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar domHelper = exports.domHelper = function () {\n\t    return {\n\t        removeClass: function removeClass(el, className) {\n\t            if (el.classList) {\n\t                el.classList.remove(className);\n\t            } else {\n\t                el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t            }\n\t        },\n\t\n\t        addClass: function addClass(el, className) {\n\t            if (el.classList) {\n\t                el.classList.add(className);\n\t            } else {\n\t                el.className += ' ' + className;\n\t            }\n\t        },\n\t\n\t        hasClass: function hasClass(el, className) {\n\t            if (el.classList) {\n\t                el.classList.contains(className);\n\t            } else {\n\t                new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n\t            }\n\t        },\n\t\n\t        toggleClass: function toggleClass(el, className) {\n\t            if (el.classList) {\n\t                el.classList.toggle(className);\n\t            } else {\n\t                var classes = el.className.split(' ');\n\t                var existingIndex = classes.indexOf(className);\n\t\n\t                if (existingIndex >= 0) {\n\t                    classes.splice(existingIndex, 1);\n\t                } else {\n\t                    classes.push(className);\n\t                }\n\t\n\t                el.className = classes.join(' ');\n\t            }\n\t        }\n\t    };\n\t}();\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** chat-ui.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 78871675bfec57263bb5\n **/","import {MainFrame} from './components/MainFrame';\nimport {Dialog} from './components/Dialog';\nimport {eventEmitter} from './services/eventEmitter';\nimport {chatSettings} from './services/chatSettings';\nimport {componentRender} from './services/componentRender';\n\nconst ChatUI = (chatData) => {\n\n    return {\n        render: (querySelector, componentName) => {\n            const baseEl = document.querySelector(querySelector);\n            if (!baseEl) {\n                throw new Error(`Given selector ${querySelector} is not match to any element`);\n            }\n            chatSettings.setSettings(chatData);\n            switch (componentName) {\n                case 'dialog':\n                    baseEl.appendChild(componentRender(Dialog));\n                    break;\n                case 'mainFrame':\n                default:\n                    baseEl.appendChild(componentRender(MainFrame));\n                    break;\n            }\n            return {\n                on: (eventName, callback) => {\n                    eventEmitter.addListener(eventName, callback);\n                },\n                off: (eventName, callback) => {\n                    eventEmitter.removeListener(eventName, callback);\n                },\n                trigger: (eventName, data) => {\n                    eventEmitter.emit(eventName, data);\n                }\n            };\n        }\n    };\n};\n\nexport default ChatUI;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/index.js\n **/","import {LIB_NAME} from '../constants/general';\nimport {CLOSE_CHAT, OPEN_CHAT, CHAT_CLOSED, CHAT_CLOSED_SOURCE_CHAT} from '../constants/header';\nimport {Component} from '../components/Component';\nimport {Header} from '../components/Header';\nimport {Dialog} from '../components/Dialog';\nimport {Input} from '../components/Input';\nimport {eventEmitter} from '../services/eventEmitter';\nimport {domHelper} from '../services/domHelper';\n\nexport class MainFrame extends Component {\n    constructor() {\n        super();\n        this.openChatClass = `${LIB_NAME}-mainframe_open`;\n    }\n\n    addEvents() {\n        eventEmitter.on(CLOSE_CHAT, (data) => {\n            const closeSource = data && data.source ? data.source : CHAT_CLOSED_SOURCE_CHAT;\n            domHelper.removeClass(this.refs.mainframe, this.openChatClass);\n            eventEmitter.emit(CHAT_CLOSED, {source: closeSource});\n        });\n\n        eventEmitter.on(OPEN_CHAT, () => {\n            domHelper.addClass(this.refs.mainframe, this.openChatClass);\n        });\n    }\n\n    render() {\n        this.addEvents();\n\n        return {\n            div: {\n                id: `${LIB_NAME}-mainframe`,\n                ref: 'mainframe',\n                children: [\n                    {\n                        div: {\n                            className: `${LIB_NAME}-header-container`,\n                            component: Header\n                        }\n                    },\n                    {\n                        div: {\n                            className: `${LIB_NAME}-dialog-container`,\n                            component: Dialog\n                        }\n                    },\n                    {\n                        div: {\n                            className: `${LIB_NAME}-input-container`,\n                            component: Input\n                        }\n                    }\n                ]\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/MainFrame.js\n **/","export const LIB_NAME = 'chat-ui';\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/constants/general.js\n **/","export const CLOSE_CHAT = 'close-chat';\nexport const CHAT_CLOSED = 'chat-closed';\nexport const CHAT_CLOSED_SOURCE_USER = 'user';\nexport const CHAT_CLOSED_SOURCE_CHAT = 'chat';\nexport const OPEN_CHAT = 'open-chat';\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/constants/header.js\n **/","export class Component {\n    constructor() {\n        this.refs = {};\n    }\n\n    componentWillMount() {}\n\n    $$updateRefs(newRefs) {\n        this.refs = newRefs;\n    }\n\n    render() {\n        return {\n            div: {\n                innerHTML: 'Basic Component'\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/Component.js\n **/","import {Component} from './Component';\nimport {LIB_NAME} from '../constants/general';\nimport {CLOSE_CHAT, CHAT_CLOSED_SOURCE_USER} from '../constants/header';\nimport {templateEngine} from '../services/templateEngine';\nimport {eventEmitter} from '../services/eventEmitter';\nimport {chatSettings} from '../services/chatSettings';\n\nexport class Header extends Component {\n    constructor() {\n        super();\n\n        this.onClose = () => {\n            // Event for mainframe to close the chat (remove 'open' class)\n            eventEmitter.emit(CLOSE_CHAT, {source: CHAT_CLOSED_SOURCE_USER});\n        };\n    }\n\n    render() {\n        const id = `${LIB_NAME}-header`;\n        const closeBtnClass = `${LIB_NAME}-header__close`;\n        const innerTemplate = `\n            <div class=\"${closeBtnClass}\"></div>\n            <div class=\"${LIB_NAME}-header__cell ${LIB_NAME}-header__cell_image\">\n                <div class=\"${LIB_NAME}-header__image\"\n                     <% if (avatar) { %>\n                     style=\"background-image: url('<% avatar %>')\"\n                     <% } %>\n                     >\n                </div>\n            </div>\n            <div class=\"${LIB_NAME}-header__cell ${LIB_NAME}-header__cell_title\">\n                <div class=\"${LIB_NAME}-header__title\">\n                    <% title %>\n                </div>\n                <div class=\"${LIB_NAME}-header__subtitle\">\n                    <% subtitle %>\n                </div>\n            </div>\n        `;\n        const chatData = {\n            avatar: chatSettings.getProperty('avatar'),\n            title: chatSettings.getProperty('title'),\n            subtitle: chatSettings.getProperty('subtitle')\n        };\n\n        return {\n            div: {\n                id,\n                innerHTML: templateEngine(innerTemplate, chatData),\n                click: this.onClose\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/Header.js\n **/","/**\n * Absurd TemplateEngine\n * https://github.com/krasimir/absurd/blob/master/lib/processors/html/helpers/TemplateEngine.js\n * http://krasimirtsonev.com/blog/article/Javascript-template-engine-in-just-20-line\n * @param html {string}\n * @param data {object}\n * @returns {string}\n * @constructor\n */\nexport const templateEngine = (html, data) => {\n    const re = /<%(.+?)%>/g;\n    const reExp = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g;\n    let code = 'with(obj) { var r=[];\\n';\n    let cursor = 0;\n    let result;\n    let match;\n    const add = (line, js) => {\n        if (js) {\n            code += line.match(reExp) ? `${line}\\n` : `r.push(${line});\\n`;\n        } else {\n            code += line !== '' ? `r.push(\"${line.replace(/\"/g, '\\\\\"')}\");\\n` : '';\n        }\n        return add;\n    };\n    while (match = re.exec(html)) {\n        add(html.slice(cursor, match.index))(match[1], true);\n        cursor = match.index + match[0].length;\n    }\n    add(html.substr(cursor, html.length - cursor));\n    code = (`${code}return r.join(\"\"); }`).replace(/[\\r\\t\\n]/g, ' ');\n    try {\n        result = new Function('obj', code).apply(data, [data]);\n    } catch(err) {\n        console.error(`'${err.message}'`, ' in \\n\\nCode:\\n', code, '\\n');\n    }\n    return result;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/templateEngine.js\n **/","import EventEmitter from 'wolfy87-eventemitter';\n\nlet ee = null;\n\nexport const eventEmitter = (() => {\n    ee = ee || new EventEmitter();\n    return ee;\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/eventEmitter.js\n **/","/*!\n * EventEmitter v5.0.0 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function () {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var exports = this;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}.call(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/wolfy87-eventemitter/EventEmitter.js\n ** module id = 8\n ** module chunks = 0\n **/","import {eventEmitter} from './eventEmitter';\nimport {LIB_NAME} from '../constants/general';\nimport {SETTINGS_CHANGED} from '../constants/settings';\n\nexport const chatSettings = (() => {\n    let settings = {\n        // Chat title or name of the consultant\n        title: 'John Doe',\n        // Position or consultant description\n        subtitle: 'consultant',\n        // Avatar image of the consultant - string or boolean\n        avatar: false,\n        // Text for \"send\" button in chat window\n        sendText: 'Send',\n        // Placeholder text on the input\n        inputPlaceholder: 'Enter your message',\n        // Message that operator is typing\n        isTyping: `\n            <div class=\"${LIB_NAME}-dots-loading\">\n                <span class=\"dots-loading__dot\">&#8226;</span>\n                <span class=\"dots-loading__dot\">&#8226;</span>\n                <span class=\"dots-loading__dot\">&#8226;</span>\n            </div>\n        `\n    };\n\n    return {\n        setSettings: (newSettings) => {\n            let settingsChanged = false;\n            for (const key in newSettings) {\n                if (settings.hasOwnProperty(key)) {\n                    settings[key] = newSettings[key];\n                    settingsChanged = true;\n                }\n            }\n            if (settingsChanged) {\n                eventEmitter.emit(SETTINGS_CHANGED);\n            }\n        },\n\n        getProperty: (property) => settings[property]\n    };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/chatSettings.js\n **/","export const SETTINGS_CHANGED = 'settings-changed';\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/constants/settings.js\n **/","\nimport {Component} from './Component';\nimport {LIB_NAME} from '../constants/general';\nimport {IS_TYPING, SIDE_USER, SIDE_CHAT, CLEAR_DIALOG, ADD_PHRASE, USER_SEND_MESSAGE} from '../constants/dialog';\nimport {templateEngine} from '../services/templateEngine';\nimport {componentRender} from '../services/componentRender';\nimport {dialogList} from '../services/dialogList';\nimport {chatSettings} from '../services/chatSettings';\nimport {eventEmitter} from '../services/eventEmitter';\nimport {sanitize} from '../services/sanitize';\nimport {DialogBubble} from './DialogBubble';\n\nexport class Dialog extends Component {\n    constructor() {\n        super();\n\n        this.dialogListEl = null;\n\n        /**\n         * Add phrase to the dialog\n         * @param data {Object}\n         * @param data.side {string}\n         * @param data.message {string}\n         * @param data.type {string}\n         */\n        this.addPhrase = (data) => {\n            if (!this.dialogListEl) {\n                const dialogEl = this.refs.dialogEl;\n                const $$dialogListEl = dialogEl.getElementsByClassName(`${LIB_NAME}-dialog-list`);\n                if ($$dialogListEl) {\n                    this.dialogListEl = $$dialogListEl[0];\n                }\n            }\n            const temporaryPhrase = dialogList.getTemporaryPhrase();\n            let message;\n            if (temporaryPhrase && data.type === IS_TYPING) {\n                console.warn('There is already \"is-typing\" phrase in the dialog. You can\\'t add another one.');\n                return;\n            }\n            const side = data.side === SIDE_USER ? SIDE_USER : SIDE_CHAT;\n            if (data.type === IS_TYPING) {\n                message = chatSettings.getProperty('isTyping');\n            } else {\n                message = sanitize(typeof data === 'string' ? data : data.message);\n            }\n            const bubbleComponent = componentRender(DialogBubble, {\n                side,\n                message,\n                type: data.type\n            });\n            if (temporaryPhrase && side !== temporaryPhrase.side) {\n                this.dialogListEl.insertBefore(bubbleComponent, temporaryPhrase.ref);\n            } else {\n                if (temporaryPhrase) {\n                    temporaryPhrase.ref.parentNode.removeChild(temporaryPhrase.ref);\n                }\n                this.dialogListEl.appendChild(bubbleComponent);\n            }\n            if (side === SIDE_USER) {\n                eventEmitter.emit(USER_SEND_MESSAGE, data.message);\n            }\n            this.scrollDialogDown();\n        };\n    }\n\n    scrollDialogDown() {\n        this.refs.dialogEl.scrollTop = this.refs.dialogEl.scrollHeight;\n    }\n\n    addEvents() {\n        eventEmitter.addListener(ADD_PHRASE, this.addPhrase);\n        eventEmitter.addListener(IS_TYPING, () => {\n            this.addPhrase({\n                type: IS_TYPING\n            });\n        });\n        eventEmitter.on(CLEAR_DIALOG, () => {\n            this.dialogListEl.innerHTML = '';\n            dialogList.clearDialog();\n        });\n    }\n\n    render() {\n        const id = `${LIB_NAME}-dialog`;\n        const innerTemplate = `\n            <div class=\"${LIB_NAME}-dialog-list\">\n            </div>\n        `;\n\n        this.addEvents();\n        return {\n            div: {\n                id,\n                innerHTML: templateEngine(innerTemplate, {}),\n                ref: 'dialogEl'\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/Dialog.js\n **/","export const ADD_PHRASE = 'add-phrase';\nexport const USER_SEND_MESSAGE = 'user-send-message';\nexport const CLEAR_DIALOG = 'clear-dialog';\nexport const IS_TYPING = 'is-typing';\nexport const SIDE_USER = 'user';\nexport const SIDE_CHAT = 'chat';\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/constants/dialog.js\n **/","import {templateTreeRender} from './templateTreeRender';\n\nexport const componentRender = (ComponentClass, componentData = null) => {\n    const component = new ComponentClass();\n    const renderedComponent = templateTreeRender(component.render(componentData));\n\n    component.$$updateRefs(renderedComponent.refs);\n\n    component.componentWillMount();\n\n    return renderedComponent.fragment;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/componentRender.js\n **/","import {componentRender} from '../services/componentRender';\n\n/**\n * Template Tree Render\n * {\n *     div: {\n *         children: [\n *              {\n *                  span: {\n *                      // ...\n *                  }\n *              }\n *         ],\n *         className: \"header__title header__title_important\"\n *         ref: 'reference-name'    // reference object to the node\n *         text: '',                // text node\n *         innerHtml: '',           // inner html, can't be with \"text\" in the same element\n *         click: function() {}     // event handler\n *     }\n * }\n * @param tree {Object}\n * @returns {Object}\n */\n\nexport const templateTreeRender = (tree) => {\n    let fragment = document.createDocumentFragment();\n    let refs = {};\n\n    const createElement = (tagName, elementData) => {\n        let element = document.createElement(tagName);\n        const events = ['click', 'submit'];\n        if (elementData.hasOwnProperty('text') && elementData.hasOwnProperty('innerHtml')) {\n            throw new Error(`Element \"${tagName}\" has both \"text\" and \"innerHtml\" in object. Should be one`);\n        }\n        for (const key in elementData) {\n            switch (true) {\n                case key === 'text':\n                    element.createTextNode(elementData[key]);\n                    break;\n                case key === 'innerHTML':\n                    element.innerHTML = elementData[key];\n                    break;\n                case key === 'children':\n                    for (let i = 0, len = elementData[key].length; i < len; i++) {\n                        for (const subKey in elementData[key][i]) {\n                            element.appendChild(createElement(subKey, elementData[key][i][subKey]));\n                        }\n                    }\n                    break;\n                case key === 'className':\n                    element.setAttribute('class', elementData[key]);\n                    break;\n                case key === 'ref':\n                    refs[elementData[key]] = element;\n                    break;\n                case key === 'component':\n                    element.appendChild(componentRender(elementData[key]));\n                    break;\n                case events.indexOf(key) > -1:\n                    element.addEventListener(key, elementData[key]);\n                    break;\n                default:\n                    element.setAttribute(key, elementData[key]);\n            }\n        }\n        return element;\n    };\n\n    for (const key in tree) {\n        let el = createElement(key, tree[key]);\n        fragment.appendChild(el);\n    }\n\n    return {\n        fragment,\n        refs\n    };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/templateTreeRender.js\n **/","import {IS_TYPING} from '../constants/dialog';\n\nexport const dialogList = (() => {\n    let dialog = [];\n\n    return {\n        addPhrase: (newPhrase) => {\n            let temporaryPhrase;\n            let temporaryPhraseIndex;\n            for (let i = 0, len = dialog.length; i < len; i++) {\n                if (dialog[i].type === IS_TYPING) {\n                    temporaryPhrase = dialog[i];\n                    temporaryPhraseIndex = i;\n                }\n            }\n            if (temporaryPhrase && newPhrase.side !== temporaryPhrase.side) {\n                // insert before\n                dialog.splice(temporaryPhraseIndex, 0, newPhrase);\n            } else {\n                if (temporaryPhrase) {\n                    dialog.splice(temporaryPhraseIndex, 1);\n                }\n                dialog.push({\n                    side: newPhrase.side,           // 'chat', 'user'\n                    message: newPhrase.message,     // text of the message\n                    ref: newPhrase.ref || null,     // bubble element reference\n                    type: newPhrase.type            // 'is-typing'\n                });\n            }\n        },\n\n        getTemporaryPhrase: () => {\n            for (let i = 0, len = dialog.length; i < len; i++) {\n                if (dialog[i].type === IS_TYPING) {\n                    return dialog[i];\n                }\n            }\n            return null;\n        },\n\n        clearDialog: () => {\n            dialog = [];\n        }\n    };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/dialogList.js\n **/","import {htmlSanitize} from '../vendor/html-sanitizer';\n\nexport const sanitize = (userInput) => {\n    return htmlSanitize(userInput);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/sanitize.js\n **/","/* eslint-disable */\n\nimport {html4} from './html4-defs';\n\n// Copyright (C) 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * An HTML sanitizer that can satisfy a variety of security policies.\n *\n * <p>\n * The HTML sanitizer is built around a SAX parser and HTML element and\n * attributes schemas.\n *\n * If the cssparser is loaded, inline styles are sanitized using the\n * css property and value schemas.  Else they are remove during\n * sanitization.\n *\n * If it exists, uses parseCssDeclarations, sanitizeCssProperty,  cssSchema\n *\n * @author mikesamuel@gmail.com\n * @author jasvir@gmail.com\n * \\@requires html4, URI\n * \\@overrides window\n * \\@provides html, html_sanitize, defs\n */\n\n// The Turkish i seems to be a non-issue, but abort in case it is.\nif ('I'.toLowerCase() !== 'i') { throw 'I/i problem'; }\n\n// TODO(kpreid): Refactor so there is no global introduced by these type\n// definitions.\n\n/**\n * Contains types related to sanitizer policies.\n * \\@namespace\n */\nvar defs = {};\n\n/**\n * A decision about what to do with a tag.\n * @typedef {{ 'attribs': ?Array.<string>, 'tagName': ?string }}\n */\ndefs.TagPolicyDecision;\n\n/**\n * A function that takes a tag name (canonical) and an array of attributes\n * and decides what to do, returning null to indicate the tag should be dropped\n * entirely from the output.\n *\n * @typedef {function(string, Array.<string>): ?defs.TagPolicyDecision}\n */\ndefs.TagPolicy;\n\n\n/**\n * \\@namespace\n */\nexport var html = (function(html4) {\n\n    // For closure compiler\n    var parseCssDeclarations, sanitizeCssProperty, cssSchema;\n    if ('undefined' !== typeof window) {\n        parseCssDeclarations = window['parseCssDeclarations'];\n        sanitizeCssProperty = window['sanitizeCssProperty'];\n        cssSchema = window['cssSchema'];\n    }\n\n    // The keys of this object must be 'quoted' or JSCompiler will mangle them!\n    // This is a partial list -- lookupEntity() uses the host browser's parser\n    // (when available) to implement full entity lookup.\n    // Note that entities are in general case-sensitive; the uppercase ones are\n    // explicitly defined by HTML5 (presumably as compatibility).\n    var ENTITIES = {\n        'lt': '<',\n        'LT': '<',\n        'gt': '>',\n        'GT': '>',\n        'amp': '&',\n        'AMP': '&',\n        'quot': '\"',\n        'apos': '\\'',\n        'nbsp': '\\u00A0'\n    };\n\n    // Patterns for types of entity/character reference names.\n    var decimalEscapeRe = /^#(\\d+)$/;\n    var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n    // contains every entity per http://www.w3.org/TR/2011/WD-html5-20110113/named-character-references.html\n    var safeEntityNameRe = /^[A-Za-z][A-za-z0-9]+$/;\n    // Used as a hook to invoke the browser's entity parsing. <textarea> is used\n    // because its content is parsed for entities but not tags.\n    // TODO(kpreid): This retrieval is a kludge and leads to silent loss of\n    // functionality if the document isn't available.\n    var entityLookupElement =\n        ('undefined' !== typeof window && window['document'])\n            ? window['document'].createElement('textarea') : null;\n    /**\n     * Decodes an HTML entity.\n     *\n     * {\\@updoc\n     * $ lookupEntity('lt')\n     * # '<'\n     * $ lookupEntity('GT')\n     * # '>'\n     * $ lookupEntity('amp')\n     * # '&'\n     * $ lookupEntity('nbsp')\n     * # '\\xA0'\n     * $ lookupEntity('apos')\n     * # \"'\"\n     * $ lookupEntity('quot')\n     * # '\"'\n     * $ lookupEntity('#xa')\n     * # '\\n'\n     * $ lookupEntity('#10')\n     * # '\\n'\n     * $ lookupEntity('#x0a')\n     * # '\\n'\n     * $ lookupEntity('#010')\n     * # '\\n'\n     * $ lookupEntity('#x00A')\n     * # '\\n'\n     * $ lookupEntity('Pi')      // Known failure\n     * # '\\u03A0'\n     * $ lookupEntity('pi')      // Known failure\n     * # '\\u03C0'\n     * }\n     *\n     * @param {string} name the content between the '&' and the ';'.\n     * @return {string} a single unicode code-point as a string.\n     */\n    function lookupEntity(name) {\n        // TODO: entity lookup as specified by HTML5 actually depends on the\n        // presence of the \";\".\n        if (ENTITIES.hasOwnProperty(name)) { return ENTITIES[name]; }\n        var m = name.match(decimalEscapeRe);\n        if (m) {\n            return String.fromCharCode(parseInt(m[1], 10));\n        } else if (!!(m = name.match(hexEscapeRe))) {\n            return String.fromCharCode(parseInt(m[1], 16));\n        } else if (entityLookupElement && safeEntityNameRe.test(name)) {\n            entityLookupElement.innerHTML = '&' + name + ';';\n            var text = entityLookupElement.textContent;\n            ENTITIES[name] = text;\n            return text;\n        } else {\n            return '&' + name + ';';\n        }\n    }\n\n    function decodeOneEntity(_, name) {\n        return lookupEntity(name);\n    }\n\n    var nulRe = /\\0/g;\n    function stripNULs(s) {\n        return s.replace(nulRe, '');\n    }\n\n    var ENTITY_RE_1 = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/g;\n    var ENTITY_RE_2 = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/;\n    /**\n     * The plain text of a chunk of HTML CDATA which possibly containing.\n     *\n     * {\\@updoc\n     * $ unescapeEntities('')\n     * # ''\n     * $ unescapeEntities('hello World!')\n     * # 'hello World!'\n     * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n     * # '1 < 2 && 4 > 3\\n'\n     * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n     * # '<&lt <- unfinished entity>'\n     * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n     * # '/foo?bar=baz&copy=true'\n     * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n     * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n     * }\n     *\n     * @param {string} s a chunk of HTML CDATA.  It must not start or end inside\n     *     an HTML entity.\n     */\n    function unescapeEntities(s) {\n        return s.replace(ENTITY_RE_1, decodeOneEntity);\n    }\n\n    var ampRe = /&/g;\n    var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n    var ltRe = /[<]/g;\n    var gtRe = />/g;\n    var quotRe = /\\\"/g;\n\n    /**\n     * Escapes HTML special characters in attribute values.\n     *\n     * {\\@updoc\n     * $ escapeAttrib('')\n     * # ''\n     * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n     * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n     * $ escapeAttrib('Hello <World>!')\n     * # 'Hello &lt;World&gt;!'\n     * }\n     */\n    function escapeAttrib(s) {\n        return ('' + s).replace(ampRe, '&amp;').replace(ltRe, '&lt;')\n            .replace(gtRe, '&gt;').replace(quotRe, '&#34;');\n    }\n\n    /**\n     * Escape entities in RCDATA that can be escaped without changing the meaning.\n     * {\\@updoc\n     * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n     * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n     * }\n     */\n    function normalizeRCData(rcdata) {\n        return rcdata\n            .replace(looseAmpRe, '&amp;$1')\n            .replace(ltRe, '&lt;')\n            .replace(gtRe, '&gt;');\n    }\n\n    // TODO(felix8a): validate sanitizer regexs against the HTML5 grammar at\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\n    // We initially split input so that potentially meaningful characters\n    // like '<' and '>' are separate tokens, using a fast dumb process that\n    // ignores quoting.  Then we walk that token stream, and when we see a\n    // '<' that's the start of a tag, we use ATTR_RE to extract tag\n    // attributes from the next token.  That token will never have a '>'\n    // character.  However, it might have an unbalanced quote character, and\n    // when we see that, we combine additional tokens to balance the quote.\n\n    var ATTR_RE = new RegExp(\n        '^\\\\s*' +\n        '([-.:\\\\w]+)' +             // 1 = Attribute name\n        '(?:' + (\n        '\\\\s*(=)\\\\s*' +           // 2 = Is there a value?\n        '(' + (                   // 3 = Attribute value\n            // TODO(felix8a): maybe use backref to match quotes\n        '(\\\")[^\\\"]*(\\\"|$)' +    // 4, 5 = Double-quoted string\n        '|' +\n        '(\\')[^\\']*(\\'|$)' +    // 6, 7 = Single-quoted string\n        '|' +\n        // Positive lookahead to prevent interpretation of\n        // <foo a= b=c> as <foo a='b=c'>\n        // TODO(felix8a): might be able to drop this case\n        '(?=[a-z][-\\\\w]*\\\\s*=)' +\n        '|' +\n        // Unquoted value that isn't an attribute name\n        // (since we didn't match the positive lookahead above)\n        '[^\\\"\\'\\\\s]*' ) +\n        ')' ) +\n        ')?',\n        'i');\n\n    // false on IE<=8, true on most other browsers\n    var splitWillCapture = ('a,b'.split(/(,)/).length === 3);\n\n    // bitmask for tags with special parsing, like <script> and <textarea>\n    var EFLAGS_TEXT = html4.eflags['CDATA'] | html4.eflags['RCDATA'];\n\n    /**\n     * Given a SAX-like event handler, produce a function that feeds those\n     * events and a parameter to the event handler.\n     *\n     * The event handler has the form:{@code\n     * {\n     *   // Name is an upper-case HTML tag name.  Attribs is an array of\n     *   // alternating upper-case attribute names, and attribute values.  The\n     *   // attribs array is reused by the parser.  Param is the value passed to\n     *   // the saxParser.\n     *   startTag: function (name, attribs, param) { ... },\n     *   endTag:   function (name, param) { ... },\n     *   pcdata:   function (text, param) { ... },\n     *   rcdata:   function (text, param) { ... },\n     *   cdata:    function (text, param) { ... },\n     *   startDoc: function (param) { ... },\n     *   endDoc:   function (param) { ... }\n     * }}\n     *\n     * @param {Object} handler a record containing event handlers.\n     * @return {function(string, Object)} A function that takes a chunk of HTML\n     *     and a parameter.  The parameter is passed on to the handler methods.\n     */\n    function makeSaxParser(handler) {\n        // Accept quoted or unquoted keys (Closure compat)\n        var hcopy = {\n            cdata: handler.cdata || handler['cdata'],\n            comment: handler.comment || handler['comment'],\n            endDoc: handler.endDoc || handler['endDoc'],\n            endTag: handler.endTag || handler['endTag'],\n            pcdata: handler.pcdata || handler['pcdata'],\n            rcdata: handler.rcdata || handler['rcdata'],\n            startDoc: handler.startDoc || handler['startDoc'],\n            startTag: handler.startTag || handler['startTag']\n        };\n        return function(htmlText, param) {\n            return parse(htmlText, hcopy, param);\n        };\n    }\n\n    // Parsing strategy is to split input into parts that might be lexically\n    // meaningful (every \">\" becomes a separate part), and then recombine\n    // parts if we discover they're in a different context.\n\n    // TODO(felix8a): Significant performance regressions from -legacy,\n    // tested on\n    //    Chrome 18.0\n    //    Firefox 11.0\n    //    IE 6, 7, 8, 9\n    //    Opera 11.61\n    //    Safari 5.1.3\n    // Many of these are unusual patterns that are linearly slower and still\n    // pretty fast (eg 1ms to 5ms), so not necessarily worth fixing.\n\n    // TODO(felix8a): \"<script> && && && ... <\\/script>\" is slower on all\n    // browsers.  The hotspot is htmlSplit.\n\n    // TODO(felix8a): \"<p title='>>>>...'><\\/p>\" is slower on all browsers.\n    // This is partly htmlSplit, but the hotspot is parseTagAndAttrs.\n\n    // TODO(felix8a): \"<a><\\/a><a><\\/a>...\" is slower on IE9.\n    // \"<a>1<\\/a><a>1<\\/a>...\" is faster, \"<a><\\/a>2<a><\\/a>2...\" is faster.\n\n    // TODO(felix8a): \"<p<p<p...\" is slower on IE[6-8]\n\n    var continuationMarker = {};\n    function parse(htmlText, handler, param) {\n        var m, p, tagName;\n        var parts = htmlSplit(htmlText);\n        var state = {\n            noMoreGT: false,\n            noMoreEndComments: false\n        };\n        parseCPS(handler, parts, 0, state, param);\n    }\n\n    function continuationMaker(h, parts, initial, state, param) {\n        return function () {\n            parseCPS(h, parts, initial, state, param);\n        };\n    }\n\n    function parseCPS(h, parts, initial, state, param) {\n        try {\n            if (h.startDoc && initial == 0) { h.startDoc(param); }\n            var m, p, tagName;\n            for (var pos = initial, end = parts.length; pos < end;) {\n                var current = parts[pos++];\n                var next = parts[pos];\n                switch (current) {\n                    case '&':\n                        if (ENTITY_RE_2.test(next)) {\n                            if (h.pcdata) {\n                                h.pcdata('&' + next, param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                            pos++;\n                        } else {\n                            if (h.pcdata) { h.pcdata(\"&amp;\", param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\/':\n                        if ((m = /^([-\\w:]+)[^\\'\\\"]*/.exec(next))) {\n                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n                                // fast case, no attribute parsing needed\n                                pos += 2;\n                                tagName = m[1].toLowerCase();\n                                if (h.endTag) {\n                                    h.endTag(tagName, param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                            } else {\n                                // slow case, need to parse attributes\n                                // TODO(felix8a): do we really care about misparsing this?\n                                pos = parseEndTag(\n                                    parts, pos, h, param, continuationMarker, state);\n                            }\n                        } else {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;/', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<':\n                        if (m = /^([-\\w:]+)\\s*\\/?/.exec(next)) {\n                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n                                // fast case, no attribute parsing needed\n                                pos += 2;\n                                tagName = m[1].toLowerCase();\n                                if (h.startTag) {\n                                    h.startTag(tagName, [], param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                                // tags like <script> and <textarea> have special parsing\n                                var eflags = html4.ELEMENTS[tagName];\n                                if (eflags & EFLAGS_TEXT) {\n                                    var tag = { name: tagName, next: pos, eflags: eflags };\n                                    pos = parseText(\n                                        parts, tag, h, param, continuationMarker, state);\n                                }\n                            } else {\n                                // slow case, need to parse attributes\n                                pos = parseStartTag(\n                                    parts, pos, h, param, continuationMarker, state);\n                            }\n                        } else {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\!--':\n                        // The pathological case is n copies of '<\\!--' without '-->', and\n                        // repeated failure to find '-->' is quadratic.  We avoid that by\n                        // remembering when search for '-->' fails.\n                        if (!state.noMoreEndComments) {\n                            // A comment <\\!--x--> is split into three tokens:\n                            //   '<\\!--', 'x--', '>'\n                            // We want to find the next '>' token that has a preceding '--'.\n                            // pos is at the 'x--'.\n                            for (p = pos + 1; p < end; p++) {\n                                if (parts[p] === '>' && /--$/.test(parts[p - 1])) { break; }\n                            }\n                            if (p < end) {\n                                if (h.comment) {\n                                    var comment = parts.slice(pos, p).join('');\n                                    h.comment(\n                                        comment.substr(0, comment.length - 2), param,\n                                        continuationMarker,\n                                        continuationMaker(h, parts, p + 1, state, param));\n                                }\n                                pos = p + 1;\n                            } else {\n                                state.noMoreEndComments = true;\n                            }\n                        }\n                        if (state.noMoreEndComments) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;!--', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\!':\n                        if (!/^\\w/.test(next)) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;!', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        } else {\n                            // similar to noMoreEndComment logic\n                            if (!state.noMoreGT) {\n                                for (p = pos + 1; p < end; p++) {\n                                    if (parts[p] === '>') { break; }\n                                }\n                                if (p < end) {\n                                    pos = p + 1;\n                                } else {\n                                    state.noMoreGT = true;\n                                }\n                            }\n                            if (state.noMoreGT) {\n                                if (h.pcdata) {\n                                    h.pcdata('&lt;!', param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                            }\n                        }\n                        break;\n                    case '<?':\n                        // similar to noMoreEndComment logic\n                        if (!state.noMoreGT) {\n                            for (p = pos + 1; p < end; p++) {\n                                if (parts[p] === '>') { break; }\n                            }\n                            if (p < end) {\n                                pos = p + 1;\n                            } else {\n                                state.noMoreGT = true;\n                            }\n                        }\n                        if (state.noMoreGT) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;?', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '>':\n                        if (h.pcdata) {\n                            h.pcdata(\"&gt;\", param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                        }\n                        break;\n                    case '':\n                        break;\n                    default:\n                        if (h.pcdata) {\n                            h.pcdata(current, param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                        }\n                        break;\n                }\n            }\n            if (h.endDoc) { h.endDoc(param); }\n        } catch (e) {\n            if (e !== continuationMarker) { throw e; }\n        }\n    }\n\n    // Split str into parts for the html parser.\n    function htmlSplit(str) {\n        // can't hoist this out of the function because of the re.exec loop.\n        var re = /(<\\/|<\\!--|<[!?]|[&<>])/g;\n        str += '';\n        if (splitWillCapture) {\n            return str.split(re);\n        } else {\n            var parts = [];\n            var lastPos = 0;\n            var m;\n            while ((m = re.exec(str)) !== null) {\n                parts.push(str.substring(lastPos, m.index));\n                parts.push(m[0]);\n                lastPos = m.index + m[0].length;\n            }\n            parts.push(str.substring(lastPos));\n            return parts;\n        }\n    }\n\n    function parseEndTag(parts, pos, h, param, continuationMarker, state) {\n        var tag = parseTagAndAttrs(parts, pos);\n        // drop unclosed tags\n        if (!tag) { return parts.length; }\n        if (h.endTag) {\n            h.endTag(tag.name, param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n        }\n        return tag.next;\n    }\n\n    function parseStartTag(parts, pos, h, param, continuationMarker, state) {\n        var tag = parseTagAndAttrs(parts, pos);\n        // drop unclosed tags\n        if (!tag) { return parts.length; }\n        if (h.startTag) {\n            h.startTag(tag.name, tag.attrs, param, continuationMarker,\n                continuationMaker(h, parts, tag.next, state, param));\n        }\n        // tags like <script> and <textarea> have special parsing\n        if (tag.eflags & EFLAGS_TEXT) {\n            return parseText(parts, tag, h, param, continuationMarker, state);\n        } else {\n            return tag.next;\n        }\n    }\n\n    var endTagRe = {};\n\n    // Tags like <script> and <textarea> are flagged as CDATA or RCDATA,\n    // which means everything is text until we see the correct closing tag.\n    function parseText(parts, tag, h, param, continuationMarker, state) {\n        var end = parts.length;\n        if (!endTagRe.hasOwnProperty(tag.name)) {\n            endTagRe[tag.name] = new RegExp('^' + tag.name + '(?:[\\\\s\\\\/]|$)', 'i');\n        }\n        var re = endTagRe[tag.name];\n        var first = tag.next;\n        var p = tag.next + 1;\n        for (; p < end; p++) {\n            if (parts[p - 1] === '<\\/' && re.test(parts[p])) { break; }\n        }\n        if (p < end) { p -= 1; }\n        var buf = parts.slice(first, p).join('');\n        if (tag.eflags & html4.eflags['CDATA']) {\n            if (h.cdata) {\n                h.cdata(buf, param, continuationMarker,\n                    continuationMaker(h, parts, p, state, param));\n            }\n        } else if (tag.eflags & html4.eflags['RCDATA']) {\n            if (h.rcdata) {\n                h.rcdata(normalizeRCData(buf), param, continuationMarker,\n                    continuationMaker(h, parts, p, state, param));\n            }\n        } else {\n            throw new Error('bug');\n        }\n        return p;\n    }\n\n    // at this point, parts[pos-1] is either \"<\" or \"<\\/\".\n    function parseTagAndAttrs(parts, pos) {\n        var m = /^([-\\w:]+)/.exec(parts[pos]);\n        var tag = {};\n        tag.name = m[1].toLowerCase();\n        tag.eflags = html4.ELEMENTS[tag.name];\n        var buf = parts[pos].substr(m[0].length);\n        // Find the next '>'.  We optimistically assume this '>' is not in a\n        // quoted context, and further down we fix things up if it turns out to\n        // be quoted.\n        var p = pos + 1;\n        var end = parts.length;\n        for (; p < end; p++) {\n            if (parts[p] === '>') { break; }\n            buf += parts[p];\n        }\n        if (end <= p) { return void 0; }\n        var attrs = [];\n        while (buf !== '') {\n            m = ATTR_RE.exec(buf);\n            if (!m) {\n                // No attribute found: skip garbage\n                buf = buf.replace(/^[\\s\\S][^a-z\\s]*/, '');\n\n            } else if ((m[4] && !m[5]) || (m[6] && !m[7])) {\n                // Unterminated quote: slurp to the next unquoted '>'\n                var quote = m[4] || m[6];\n                var sawQuote = false;\n                var abuf = [buf, parts[p++]];\n                for (; p < end; p++) {\n                    if (sawQuote) {\n                        if (parts[p] === '>') { break; }\n                    } else if (0 <= parts[p].indexOf(quote)) {\n                        sawQuote = true;\n                    }\n                    abuf.push(parts[p]);\n                }\n                // Slurp failed: lose the garbage\n                if (end <= p) { break; }\n                // Otherwise retry attribute parsing\n                buf = abuf.join('');\n                continue;\n\n            } else {\n                // We have an attribute\n                var aName = m[1].toLowerCase();\n                var aValue = m[2] ? decodeValue(m[3]) : '';\n                attrs.push(aName, aValue);\n                buf = buf.substr(m[0].length);\n            }\n        }\n        tag.attrs = attrs;\n        tag.next = p + 1;\n        return tag;\n    }\n\n    function decodeValue(v) {\n        var q = v.charCodeAt(0);\n        if (q === 0x22 || q === 0x27) { // \" or '\n            v = v.substr(1, v.length - 2);\n        }\n        return unescapeEntities(stripNULs(v));\n    }\n\n    /**\n     * Returns a function that strips unsafe tags and attributes from html.\n     * @param {defs.TagPolicy} tagPolicy\n     *     A function that takes (tagName, attribs[]), where tagName is a key in\n     *     html4.ELEMENTS and attribs is an array of alternating attribute names\n     *     and values.  It should return a record (as follows), or null to delete\n     *     the element.  It's okay for tagPolicy to modify the attribs array,\n     *     but the same array is reused, so it should not be held between calls.\n     *     Record keys:\n     *        attribs: (required) Sanitized attributes array.\n     *        tagName: Replacement tag name.\n     * @return {function(string, Array)} A function that sanitizes a string of\n     *     HTML and appends result strings to the second argument, an array.\n     */\n    function makeHtmlSanitizer(tagPolicy) {\n        var stack;\n        var ignoring;\n        var emit = function (text, out) {\n            if (!ignoring) { out.push(text); }\n        };\n        return makeSaxParser({\n            'startDoc': function(_) {\n                stack = [];\n                ignoring = false;\n            },\n            'startTag': function(tagNameOrig, attribs, out) {\n                if (ignoring) { return; }\n                if (!html4.ELEMENTS.hasOwnProperty(tagNameOrig)) { return; }\n                var eflagsOrig = html4.ELEMENTS[tagNameOrig];\n                if (eflagsOrig & html4.eflags['FOLDABLE']) {\n                    return;\n                }\n\n                var decision = tagPolicy(tagNameOrig, attribs);\n                if (!decision) {\n                    ignoring = !(eflagsOrig & html4.eflags['EMPTY']);\n                    return;\n                } else if (typeof decision !== 'object') {\n                    throw new Error('tagPolicy did not return object (old API?)');\n                }\n                if ('attribs' in decision) {\n                    attribs = decision['attribs'];\n                } else {\n                    throw new Error('tagPolicy gave no attribs');\n                }\n                var eflagsRep;\n                var tagNameRep;\n                if ('tagName' in decision) {\n                    tagNameRep = decision['tagName'];\n                    eflagsRep = html4.ELEMENTS[tagNameRep];\n                } else {\n                    tagNameRep = tagNameOrig;\n                    eflagsRep = eflagsOrig;\n                }\n                // TODO(mikesamuel): relying on tagPolicy not to insert unsafe\n                // attribute names.\n\n                // If this is an optional-end-tag element and either this element or its\n                // previous like sibling was rewritten, then insert a close tag to\n                // preserve structure.\n                if (eflagsOrig & html4.eflags['OPTIONAL_ENDTAG']) {\n                    var onStack = stack[stack.length - 1];\n                    if (onStack && onStack.orig === tagNameOrig &&\n                        (onStack.rep !== tagNameRep || tagNameOrig !== tagNameRep)) {\n                        out.push('<\\/', onStack.rep, '>');\n                    }\n                }\n\n                if (!(eflagsOrig & html4.eflags['EMPTY'])) {\n                    stack.push({orig: tagNameOrig, rep: tagNameRep});\n                }\n\n                out.push('<', tagNameRep);\n                for (var i = 0, n = attribs.length; i < n; i += 2) {\n                    var attribName = attribs[i],\n                        value = attribs[i + 1];\n                    if (value !== null && value !== void 0) {\n                        out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n                    }\n                }\n                out.push('>');\n\n                if ((eflagsOrig & html4.eflags['EMPTY'])\n                    && !(eflagsRep & html4.eflags['EMPTY'])) {\n                    // replacement is non-empty, synthesize end tag\n                    out.push('<\\/', tagNameRep, '>');\n                }\n            },\n            'endTag': function(tagName, out) {\n                if (ignoring) {\n                    ignoring = false;\n                    return;\n                }\n                if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n                var eflags = html4.ELEMENTS[tagName];\n                if (!(eflags & (html4.eflags['EMPTY'] | html4.eflags['FOLDABLE']))) {\n                    var index;\n                    if (eflags & html4.eflags['OPTIONAL_ENDTAG']) {\n                        for (index = stack.length; --index >= 0;) {\n                            var stackElOrigTag = stack[index].orig;\n                            if (stackElOrigTag === tagName) { break; }\n                            if (!(html4.ELEMENTS[stackElOrigTag] &\n                                html4.eflags['OPTIONAL_ENDTAG'])) {\n                                // Don't pop non optional end tags looking for a match.\n                                return;\n                            }\n                        }\n                    } else {\n                        for (index = stack.length; --index >= 0;) {\n                            if (stack[index].orig === tagName) { break; }\n                        }\n                    }\n                    if (index < 0) { return; }  // Not opened.\n                    for (var i = stack.length; --i > index;) {\n                        var stackElRepTag = stack[i].rep;\n                        if (!(html4.ELEMENTS[stackElRepTag] &\n                            html4.eflags['OPTIONAL_ENDTAG'])) {\n                            out.push('<\\/', stackElRepTag, '>');\n                        }\n                    }\n                    if (index < stack.length) {\n                        tagName = stack[index].rep;\n                    }\n                    stack.length = index;\n                    out.push('<\\/', tagName, '>');\n                }\n            },\n            'pcdata': emit,\n            'rcdata': emit,\n            'cdata': emit,\n            'endDoc': function(out) {\n                for (; stack.length; stack.length--) {\n                    out.push('<\\/', stack[stack.length - 1].rep, '>');\n                }\n            }\n        });\n    }\n\n    var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\n    function safeUri(uri, effect, ltype, hints, naiveUriRewriter) {\n        if (!naiveUriRewriter) { return null; }\n        try {\n            var parsed = URI.parse('' + uri);\n            if (parsed) {\n                if (!parsed.hasScheme() ||\n                    ALLOWED_URI_SCHEMES.test(parsed.getScheme())) {\n                    var safe = naiveUriRewriter(parsed, effect, ltype, hints);\n                    return safe ? safe.toString() : null;\n                }\n            }\n        } catch (e) {\n            return null;\n        }\n        return null;\n    }\n\n    function log(logger, tagName, attribName, oldValue, newValue) {\n        if (!attribName) {\n            logger(tagName + \" removed\", {\n                change: \"removed\",\n                tagName: tagName\n            });\n        }\n        if (oldValue !== newValue) {\n            var changed = \"changed\";\n            if (oldValue && !newValue) {\n                changed = \"removed\";\n            } else if (!oldValue && newValue)  {\n                changed = \"added\";\n            }\n            logger(tagName + \".\" + attribName + \" \" + changed, {\n                change: changed,\n                tagName: tagName,\n                attribName: attribName,\n                oldValue: oldValue,\n                newValue: newValue\n            });\n        }\n    }\n\n    function lookupAttribute(map, tagName, attribName) {\n        var attribKey;\n        attribKey = tagName + '::' + attribName;\n        if (map.hasOwnProperty(attribKey)) {\n            return map[attribKey];\n        }\n        attribKey = '*::' + attribName;\n        if (map.hasOwnProperty(attribKey)) {\n            return map[attribKey];\n        }\n        return void 0;\n    }\n    function getAttributeType(tagName, attribName) {\n        return lookupAttribute(html4.ATTRIBS, tagName, attribName);\n    }\n    function getLoaderType(tagName, attribName) {\n        return lookupAttribute(html4.LOADERTYPES, tagName, attribName);\n    }\n    function getUriEffect(tagName, attribName) {\n        return lookupAttribute(html4.URIEFFECTS, tagName, attribName);\n    }\n\n    /**\n     * Sanitizes attributes on an HTML tag.\n     * @param {string} tagName An HTML tag name in lowercase.\n     * @param {Array.<?string>} attribs An array of alternating names and values.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes; it can return a new string value, or null to\n     *     delete the attribute.  If unspecified, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes; it can return a new string value, or null to delete\n     *     the attribute.  If unspecified, these attributes are kept unchanged.\n     * @return {Array.<?string>} The sanitized attributes as a list of alternating\n     *     names and values, where a null value means to omit the attribute.\n     */\n    function sanitizeAttribs(tagName, attribs,\n                             opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        // TODO(felix8a): it's obnoxious that domado duplicates much of this\n        // TODO(felix8a): maybe consistently enforce constraints like target=\n        for (var i = 0; i < attribs.length; i += 2) {\n            var attribName = attribs[i];\n            var value = attribs[i + 1];\n            var oldValue = value;\n            var atype = null, attribKey;\n            if ((attribKey = tagName + '::' + attribName,\n                    html4.ATTRIBS.hasOwnProperty(attribKey)) ||\n                (attribKey = '*::' + attribName,\n                    html4.ATTRIBS.hasOwnProperty(attribKey))) {\n                atype = html4.ATTRIBS[attribKey];\n            }\n            if (atype !== null) {\n                switch (atype) {\n                    case html4.atype['NONE']: break;\n                    case html4.atype['SCRIPT']:\n                        value = null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['STYLE']:\n                        if ('undefined' === typeof parseCssDeclarations) {\n                            value = null;\n                            if (opt_logger) {\n                                log(opt_logger, tagName, attribName, oldValue, value);\n                            }\n                            break;\n                        }\n                        var sanitizedDeclarations = [];\n                        parseCssDeclarations(\n                            value,\n                            {\n                                'declaration': function (property, tokens) {\n                                    var normProp = property.toLowerCase();\n                                    sanitizeCssProperty(\n                                        normProp, tokens,\n                                        opt_naiveUriRewriter\n                                            ? function (url) {\n                                            return safeUri(\n                                                url, html4.ueffects.SAME_DOCUMENT,\n                                                html4.ltypes.SANDBOXED,\n                                                {\n                                                    \"TYPE\": \"CSS\",\n                                                    \"CSS_PROP\": normProp\n                                                }, opt_naiveUriRewriter);\n                                        }\n                                            : null);\n                                    if (tokens.length) {\n                                        sanitizedDeclarations.push(\n                                            normProp + ': ' + tokens.join(' '));\n                                    }\n                                }\n                            });\n                        value = sanitizedDeclarations.length > 0 ?\n                            sanitizedDeclarations.join(' ; ') : null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['ID']:\n                    case html4.atype['IDREF']:\n                    case html4.atype['IDREFS']:\n                    case html4.atype['GLOBAL_NAME']:\n                    case html4.atype['LOCAL_NAME']:\n                    case html4.atype['CLASSES']:\n                        value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['URI']:\n                        value = safeUri(value,\n                            getUriEffect(tagName, attribName),\n                            getLoaderType(tagName, attribName),\n                            {\n                                \"TYPE\": \"MARKUP\",\n                                \"XML_ATTR\": attribName,\n                                \"XML_TAG\": tagName\n                            }, opt_naiveUriRewriter);\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['URI_FRAGMENT']:\n                        if (value && '#' === value.charAt(0)) {\n                            value = value.substring(1);  // remove the leading '#'\n                            value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                            if (value !== null && value !== void 0) {\n                                value = '#' + value;  // restore the leading '#'\n                            }\n                        } else {\n                            value = null;\n                        }\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    default:\n                        value = null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                }\n            } else {\n                value = null;\n                if (opt_logger) {\n                    log(opt_logger, tagName, attribName, oldValue, value);\n                }\n            }\n            attribs[i + 1] = value;\n        }\n        return attribs;\n    }\n\n    /**\n     * Creates a tag policy that omits all tags marked UNSAFE in html4-defs.js\n     * and applies the default attribute sanitizer with the supplied policy for\n     * URI attributes and NMTOKEN attributes.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes.  If not given, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes.  If not given, such attributes are left unchanged.\n     * @return {defs.TagPolicy} A tagPolicy suitable for\n     *     passing to html.sanitize.\n     */\n    function makeTagPolicy(\n        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        return function(tagName, attribs) {\n            if (!(html4.ELEMENTS[tagName] & html4.eflags['UNSAFE'])) {\n                return {\n                    'attribs': sanitizeAttribs(tagName, attribs,\n                        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger)\n                };\n            } else {\n                if (opt_logger) {\n                    log(opt_logger, tagName, undefined, undefined, undefined);\n                }\n            }\n        };\n    }\n\n    /**\n     * Sanitizes HTML tags and attributes according to a given policy.\n     * @param {string} inputHtml The HTML to sanitize.\n     * @param {function(string, Array.<?string>)} tagPolicy A function that\n     *     decides which tags to accept and sanitizes their attributes (see\n     *     makeHtmlSanitizer above for details).\n     * @return {string} The sanitized HTML.\n     */\n    function sanitizeWithPolicy(inputHtml, tagPolicy) {\n        var outputArray = [];\n        makeHtmlSanitizer(tagPolicy)(inputHtml, outputArray);\n        return outputArray.join('');\n    }\n\n    /**\n     * Strips unsafe tags and attributes from HTML.\n     * @param {string} inputHtml The HTML to sanitize.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes.  If not given, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes.  If not given, such attributes are left unchanged.\n     */\n    function sanitize(inputHtml,\n                      opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        var tagPolicy = makeTagPolicy(\n            opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n        return sanitizeWithPolicy(inputHtml, tagPolicy);\n    }\n\n    // Export both quoted and unquoted names for Closure linkage.\n    var html = {};\n    html.escapeAttrib = html['escapeAttrib'] = escapeAttrib;\n    html.makeHtmlSanitizer = html['makeHtmlSanitizer'] = makeHtmlSanitizer;\n    html.makeSaxParser = html['makeSaxParser'] = makeSaxParser;\n    html.makeTagPolicy = html['makeTagPolicy'] = makeTagPolicy;\n    html.normalizeRCData = html['normalizeRCData'] = normalizeRCData;\n    html.sanitize = html['sanitize'] = sanitize;\n    html.sanitizeAttribs = html['sanitizeAttribs'] = sanitizeAttribs;\n    html.sanitizeWithPolicy = html['sanitizeWithPolicy'] = sanitizeWithPolicy;\n    html.unescapeEntities = html['unescapeEntities'] = unescapeEntities;\n    return html;\n})(html4);\n\nexport var htmlSanitize = html['sanitize'];\n\n// Exports for Closure compiler.  Note this file is also cajoled\n// for domado and run in an environment without 'window'\n// if (typeof window !== 'undefined') {\n//     window['html'] = html;\n//     window['html_sanitize'] = html_sanitize;\n// }\n\n/* eslint-enable */\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/vendor/html-sanitizer.js\n **/","/* eslint-disable */\n\n// Copyright Google Inc.\n// Licensed under the Apache Licence Version 2.0\n// Autogenerated at Thu Jun 02 04:35:24 MSK 2016\n// @overrides window\n// @provides html4\nexport var html4 = {};\nhtml4.atype = {\n  'NONE': 0,\n  'URI': 1,\n  'URI_FRAGMENT': 11,\n  'SCRIPT': 2,\n  'STYLE': 3,\n  'HTML': 12,\n  'ID': 4,\n  'IDREF': 5,\n  'IDREFS': 6,\n  'GLOBAL_NAME': 7,\n  'LOCAL_NAME': 8,\n  'CLASSES': 9,\n  'FRAME_TARGET': 10,\n  'MEDIA_QUERY': 13\n};\nhtml4[ 'atype' ] = html4.atype;\nhtml4.ATTRIBS = {\n  '*::class': 9,\n  '*::dir': 0,\n  '*::draggable': 0,\n  '*::hidden': 0,\n  '*::id': 4,\n  '*::inert': 0,\n  '*::itemprop': 0,\n  '*::itemref': 6,\n  '*::itemscope': 0,\n  '*::lang': 0,\n  '*::onblur': 2,\n  '*::onchange': 2,\n  '*::onclick': 2,\n  '*::ondblclick': 2,\n  '*::onerror': 2,\n  '*::onfocus': 2,\n  '*::onkeydown': 2,\n  '*::onkeypress': 2,\n  '*::onkeyup': 2,\n  '*::onload': 2,\n  '*::onmousedown': 2,\n  '*::onmousemove': 2,\n  '*::onmouseout': 2,\n  '*::onmouseover': 2,\n  '*::onmouseup': 2,\n  '*::onreset': 2,\n  '*::onscroll': 2,\n  '*::onselect': 2,\n  '*::onsubmit': 2,\n  '*::ontouchcancel': 2,\n  '*::ontouchend': 2,\n  '*::ontouchenter': 2,\n  '*::ontouchleave': 2,\n  '*::ontouchmove': 2,\n  '*::ontouchstart': 2,\n  '*::onunload': 2,\n  '*::spellcheck': 0,\n  '*::style': 3,\n  '*::tabindex': 0,\n  '*::title': 0,\n  '*::translate': 0,\n  'a::accesskey': 0,\n  'a::coords': 0,\n  'a::href': 1,\n  'a::hreflang': 0,\n  'a::name': 7,\n  'a::onblur': 2,\n  'a::onfocus': 2,\n  'a::shape': 0,\n  'a::target': 10,\n  'a::type': 0,\n  'area::accesskey': 0,\n  'area::alt': 0,\n  'area::coords': 0,\n  'area::href': 1,\n  'area::nohref': 0,\n  'area::onblur': 2,\n  'area::onfocus': 2,\n  'area::shape': 0,\n  'area::target': 10,\n  'audio::controls': 0,\n  'audio::loop': 0,\n  'audio::mediagroup': 5,\n  'audio::muted': 0,\n  'audio::preload': 0,\n  'audio::src': 1,\n  'bdo::dir': 0,\n  'blockquote::cite': 1,\n  'br::clear': 0,\n  'button::accesskey': 0,\n  'button::disabled': 0,\n  'button::name': 8,\n  'button::onblur': 2,\n  'button::onfocus': 2,\n  'button::type': 0,\n  'button::value': 0,\n  'canvas::height': 0,\n  'canvas::width': 0,\n  'caption::align': 0,\n  'col::align': 0,\n  'col::char': 0,\n  'col::charoff': 0,\n  'col::span': 0,\n  'col::valign': 0,\n  'col::width': 0,\n  'colgroup::align': 0,\n  'colgroup::char': 0,\n  'colgroup::charoff': 0,\n  'colgroup::span': 0,\n  'colgroup::valign': 0,\n  'colgroup::width': 0,\n  'command::checked': 0,\n  'command::command': 5,\n  'command::disabled': 0,\n  'command::icon': 1,\n  'command::label': 0,\n  'command::radiogroup': 0,\n  'command::type': 0,\n  'data::value': 0,\n  'del::cite': 1,\n  'del::datetime': 0,\n  'details::open': 0,\n  'dir::compact': 0,\n  'div::align': 0,\n  'dl::compact': 0,\n  'fieldset::disabled': 0,\n  'font::color': 0,\n  'font::face': 0,\n  'font::size': 0,\n  'form::accept': 0,\n  'form::action': 1,\n  'form::autocomplete': 0,\n  'form::enctype': 0,\n  'form::method': 0,\n  'form::name': 7,\n  'form::novalidate': 0,\n  'form::onreset': 2,\n  'form::onsubmit': 2,\n  'form::target': 10,\n  'h1::align': 0,\n  'h2::align': 0,\n  'h3::align': 0,\n  'h4::align': 0,\n  'h5::align': 0,\n  'h6::align': 0,\n  'hr::align': 0,\n  'hr::noshade': 0,\n  'hr::size': 0,\n  'hr::width': 0,\n  'iframe::align': 0,\n  'iframe::frameborder': 0,\n  'iframe::height': 0,\n  'iframe::marginheight': 0,\n  'iframe::marginwidth': 0,\n  'iframe::width': 0,\n  'img::align': 0,\n  'img::alt': 0,\n  'img::border': 0,\n  'img::height': 0,\n  'img::hspace': 0,\n  'img::ismap': 0,\n  'img::name': 7,\n  'img::src': 9,\n  'img::usemap': 11,\n  'img::vspace': 0,\n  'img::width': 0,\n  'input::accept': 0,\n  'input::accesskey': 0,\n  'input::align': 0,\n  'input::alt': 0,\n  'input::autocomplete': 0,\n  'input::checked': 0,\n  'input::disabled': 0,\n  'input::inputmode': 0,\n  'input::ismap': 0,\n  'input::list': 5,\n  'input::max': 0,\n  'input::maxlength': 0,\n  'input::min': 0,\n  'input::multiple': 0,\n  'input::name': 8,\n  'input::onblur': 2,\n  'input::onchange': 2,\n  'input::onfocus': 2,\n  'input::onselect': 2,\n  'input::pattern': 0,\n  'input::placeholder': 0,\n  'input::readonly': 0,\n  'input::required': 0,\n  'input::size': 0,\n  'input::src': 1,\n  'input::step': 0,\n  'input::type': 0,\n  'input::usemap': 11,\n  'input::value': 0,\n  'ins::cite': 1,\n  'ins::datetime': 0,\n  'label::accesskey': 0,\n  'label::for': 5,\n  'label::onblur': 2,\n  'label::onfocus': 2,\n  'legend::accesskey': 0,\n  'legend::align': 0,\n  'li::type': 0,\n  'li::value': 0,\n  'map::name': 7,\n  'menu::compact': 0,\n  'menu::label': 0,\n  'menu::type': 0,\n  'meter::high': 0,\n  'meter::low': 0,\n  'meter::max': 0,\n  'meter::min': 0,\n  'meter::optimum': 0,\n  'meter::value': 0,\n  'ol::compact': 0,\n  'ol::reversed': 0,\n  'ol::start': 0,\n  'ol::type': 0,\n  'optgroup::disabled': 0,\n  'optgroup::label': 0,\n  'option::disabled': 0,\n  'option::label': 0,\n  'option::selected': 0,\n  'option::value': 0,\n  'output::for': 6,\n  'output::name': 8,\n  'p::align': 0,\n  'pre::width': 0,\n  'progress::max': 0,\n  'progress::min': 0,\n  'progress::value': 0,\n  'q::cite': 1,\n  'select::autocomplete': 0,\n  'select::disabled': 0,\n  'select::multiple': 0,\n  'select::name': 8,\n  'select::onblur': 2,\n  'select::onchange': 2,\n  'select::onfocus': 2,\n  'select::required': 0,\n  'select::size': 0,\n  'source::type': 0,\n  'table::align': 0,\n  'table::bgcolor': 0,\n  'table::border': 0,\n  'table::cellpadding': 0,\n  'table::cellspacing': 0,\n  'table::frame': 0,\n  'table::rules': 0,\n  'table::summary': 0,\n  'table::width': 0,\n  'tbody::align': 0,\n  'tbody::char': 0,\n  'tbody::charoff': 0,\n  'tbody::valign': 0,\n  'td::abbr': 0,\n  'td::align': 0,\n  'td::axis': 0,\n  'td::bgcolor': 0,\n  'td::char': 0,\n  'td::charoff': 0,\n  'td::colspan': 0,\n  'td::headers': 6,\n  'td::height': 0,\n  'td::nowrap': 0,\n  'td::rowspan': 0,\n  'td::scope': 0,\n  'td::valign': 0,\n  'td::width': 0,\n  'textarea::accesskey': 0,\n  'textarea::autocomplete': 0,\n  'textarea::cols': 0,\n  'textarea::disabled': 0,\n  'textarea::inputmode': 0,\n  'textarea::name': 8,\n  'textarea::onblur': 2,\n  'textarea::onchange': 2,\n  'textarea::onfocus': 2,\n  'textarea::onselect': 2,\n  'textarea::placeholder': 0,\n  'textarea::readonly': 0,\n  'textarea::required': 0,\n  'textarea::rows': 0,\n  'textarea::wrap': 0,\n  'tfoot::align': 0,\n  'tfoot::char': 0,\n  'tfoot::charoff': 0,\n  'tfoot::valign': 0,\n  'th::abbr': 0,\n  'th::align': 0,\n  'th::axis': 0,\n  'th::bgcolor': 0,\n  'th::char': 0,\n  'th::charoff': 0,\n  'th::colspan': 0,\n  'th::headers': 6,\n  'th::height': 0,\n  'th::nowrap': 0,\n  'th::rowspan': 0,\n  'th::scope': 0,\n  'th::valign': 0,\n  'th::width': 0,\n  'thead::align': 0,\n  'thead::char': 0,\n  'thead::charoff': 0,\n  'thead::valign': 0,\n  'tr::align': 0,\n  'tr::bgcolor': 0,\n  'tr::char': 0,\n  'tr::charoff': 0,\n  'tr::valign': 0,\n  'track::default': 0,\n  'track::kind': 0,\n  'track::label': 0,\n  'track::srclang': 0,\n  'ul::compact': 0,\n  'ul::type': 0,\n  'video::controls': 0,\n  'video::height': 0,\n  'video::loop': 0,\n  'video::mediagroup': 5,\n  'video::muted': 0,\n  'video::poster': 1,\n  'video::preload': 0,\n  'video::src': 1,\n  'video::width': 0\n};\nhtml4[ 'ATTRIBS' ] = html4.ATTRIBS;\nhtml4.eflags = {\n  'OPTIONAL_ENDTAG': 1,\n  'EMPTY': 2,\n  'CDATA': 4,\n  'RCDATA': 8,\n  'UNSAFE': 16,\n  'FOLDABLE': 32,\n  'SCRIPT': 64,\n  'STYLE': 128,\n  'VIRTUALIZED': 256\n};\nhtml4[ 'eflags' ] = html4.eflags;\nhtml4.ELEMENTS = {\n  'a': 0,\n  'abbr': 0,\n  'acronym': 0,\n  'address': 0,\n  'applet': 272,\n  'area': 2,\n  'article': 0,\n  'aside': 0,\n  'audio': 0,\n  'b': 0,\n  'base': 274,\n  'basefont': 274,\n  'bdi': 0,\n  'bdo': 0,\n  'big': 0,\n  'blockquote': 0,\n  'body': 305,\n  'br': 2,\n  'button': 0,\n  'canvas': 0,\n  'caption': 0,\n  'center': 0,\n  'cite': 0,\n  'code': 0,\n  'col': 2,\n  'colgroup': 1,\n  'command': 2,\n  'data': 0,\n  'datalist': 0,\n  'dd': 1,\n  'del': 0,\n  'details': 0,\n  'dfn': 0,\n  'dialog': 272,\n  'dir': 0,\n  'div': 0,\n  'dl': 0,\n  'dt': 1,\n  'em': 0,\n  'fieldset': 0,\n  'figcaption': 0,\n  'figure': 0,\n  'font': 0,\n  'footer': 0,\n  'form': 0,\n  'frame': 274,\n  'frameset': 272,\n  'h1': 0,\n  'h2': 0,\n  'h3': 0,\n  'h4': 0,\n  'h5': 0,\n  'h6': 0,\n  'head': 305,\n  'header': 0,\n  'hgroup': 0,\n  'hr': 2,\n  'html': 305,\n  'i': 0,\n  // 'iframe': 4, // I don't want user to use iframe\n  'img': 2,\n  'input': 2,\n  'ins': 0,\n  'isindex': 274,\n  'kbd': 0,\n  'keygen': 274,\n  'label': 0,\n  'legend': 0,\n  'li': 1,\n  'link': 274,\n  'map': 0,\n  'mark': 0,\n  'menu': 0,\n  'meta': 274,\n  'meter': 0,\n  'nav': 0,\n  'nobr': 0,\n  'noembed': 276,\n  'noframes': 276,\n  'noscript': 276,\n  'object': 272,\n  'ol': 0,\n  'optgroup': 0,\n  'option': 1,\n  'output': 0,\n  'p': 1,\n  'param': 274,\n  'pre': 0,\n  'progress': 0,\n  'q': 0,\n  's': 0,\n  'samp': 0,\n  'script': 84,\n  'section': 0,\n  'select': 0,\n  'small': 0,\n  'source': 2,\n  'span': 0,\n  'strike': 0,\n  'strong': 0,\n  'style': 148,\n  'sub': 0,\n  'summary': 0,\n  'sup': 0,\n  'table': 0,\n  'tbody': 1,\n  'td': 1,\n  'textarea': 8,\n  'tfoot': 1,\n  'th': 1,\n  'thead': 1,\n  'time': 0,\n  'title': 280,\n  'tr': 1,\n  'track': 2,\n  'tt': 0,\n  'u': 0,\n  'ul': 0,\n  'var': 0,\n  'video': 0,\n  'wbr': 2\n};\nhtml4[ 'ELEMENTS' ] = html4.ELEMENTS;\nhtml4.ELEMENT_DOM_INTERFACES = {\n  'a': 'HTMLAnchorElement',\n  'abbr': 'HTMLElement',\n  'acronym': 'HTMLElement',\n  'address': 'HTMLElement',\n  'applet': 'HTMLAppletElement',\n  'area': 'HTMLAreaElement',\n  'article': 'HTMLElement',\n  'aside': 'HTMLElement',\n  'audio': 'HTMLAudioElement',\n  'b': 'HTMLElement',\n  'base': 'HTMLBaseElement',\n  'basefont': 'HTMLBaseFontElement',\n  'bdi': 'HTMLElement',\n  'bdo': 'HTMLElement',\n  'big': 'HTMLElement',\n  'blockquote': 'HTMLQuoteElement',\n  'body': 'HTMLBodyElement',\n  'br': 'HTMLBRElement',\n  'button': 'HTMLButtonElement',\n  'canvas': 'HTMLCanvasElement',\n  'caption': 'HTMLTableCaptionElement',\n  'center': 'HTMLElement',\n  'cite': 'HTMLElement',\n  'code': 'HTMLElement',\n  'col': 'HTMLTableColElement',\n  'colgroup': 'HTMLTableColElement',\n  'command': 'HTMLCommandElement',\n  'data': 'HTMLElement',\n  'datalist': 'HTMLDataListElement',\n  'dd': 'HTMLElement',\n  'del': 'HTMLModElement',\n  'details': 'HTMLDetailsElement',\n  'dfn': 'HTMLElement',\n  'dialog': 'HTMLDialogElement',\n  'dir': 'HTMLDirectoryElement',\n  'div': 'HTMLDivElement',\n  'dl': 'HTMLDListElement',\n  'dt': 'HTMLElement',\n  'em': 'HTMLElement',\n  'fieldset': 'HTMLFieldSetElement',\n  'figcaption': 'HTMLElement',\n  'figure': 'HTMLElement',\n  'font': 'HTMLFontElement',\n  'footer': 'HTMLElement',\n  'form': 'HTMLFormElement',\n  'frame': 'HTMLFrameElement',\n  'frameset': 'HTMLFrameSetElement',\n  'h1': 'HTMLHeadingElement',\n  'h2': 'HTMLHeadingElement',\n  'h3': 'HTMLHeadingElement',\n  'h4': 'HTMLHeadingElement',\n  'h5': 'HTMLHeadingElement',\n  'h6': 'HTMLHeadingElement',\n  'head': 'HTMLHeadElement',\n  'header': 'HTMLElement',\n  'hgroup': 'HTMLElement',\n  'hr': 'HTMLHRElement',\n  'html': 'HTMLHtmlElement',\n  'i': 'HTMLElement',\n  'iframe': 'HTMLIFrameElement',\n  'img': 'HTMLImageElement',\n  'input': 'HTMLInputElement',\n  'ins': 'HTMLModElement',\n  'isindex': 'HTMLUnknownElement',\n  'kbd': 'HTMLElement',\n  'keygen': 'HTMLKeygenElement',\n  'label': 'HTMLLabelElement',\n  'legend': 'HTMLLegendElement',\n  'li': 'HTMLLIElement',\n  'link': 'HTMLLinkElement',\n  'map': 'HTMLMapElement',\n  'mark': 'HTMLElement',\n  'menu': 'HTMLMenuElement',\n  'meta': 'HTMLMetaElement',\n  'meter': 'HTMLMeterElement',\n  'nav': 'HTMLElement',\n  'nobr': 'HTMLElement',\n  'noembed': 'HTMLElement',\n  'noframes': 'HTMLElement',\n  'noscript': 'HTMLElement',\n  'object': 'HTMLObjectElement',\n  'ol': 'HTMLOListElement',\n  'optgroup': 'HTMLOptGroupElement',\n  'option': 'HTMLOptionElement',\n  'output': 'HTMLOutputElement',\n  'p': 'HTMLParagraphElement',\n  'param': 'HTMLParamElement',\n  'pre': 'HTMLPreElement',\n  'progress': 'HTMLProgressElement',\n  'q': 'HTMLQuoteElement',\n  's': 'HTMLElement',\n  'samp': 'HTMLElement',\n  'script': 'HTMLScriptElement',\n  'section': 'HTMLElement',\n  'select': 'HTMLSelectElement',\n  'small': 'HTMLElement',\n  'source': 'HTMLSourceElement',\n  'span': 'HTMLSpanElement',\n  'strike': 'HTMLElement',\n  'strong': 'HTMLElement',\n  'style': 'HTMLStyleElement',\n  'sub': 'HTMLElement',\n  'summary': 'HTMLElement',\n  'sup': 'HTMLElement',\n  'table': 'HTMLTableElement',\n  'tbody': 'HTMLTableSectionElement',\n  'td': 'HTMLTableDataCellElement',\n  'textarea': 'HTMLTextAreaElement',\n  'tfoot': 'HTMLTableSectionElement',\n  'th': 'HTMLTableHeaderCellElement',\n  'thead': 'HTMLTableSectionElement',\n  'time': 'HTMLTimeElement',\n  'title': 'HTMLTitleElement',\n  'tr': 'HTMLTableRowElement',\n  'track': 'HTMLTrackElement',\n  'tt': 'HTMLElement',\n  'u': 'HTMLElement',\n  'ul': 'HTMLUListElement',\n  'var': 'HTMLElement',\n  'video': 'HTMLVideoElement',\n  'wbr': 'HTMLElement'\n};\nhtml4[ 'ELEMENT_DOM_INTERFACES' ] = html4.ELEMENT_DOM_INTERFACES;\nhtml4.ueffects = {\n  'NOT_LOADED': 0,\n  'SAME_DOCUMENT': 1,\n  'NEW_DOCUMENT': 2\n};\nhtml4[ 'ueffects' ] = html4.ueffects;\nhtml4.URIEFFECTS = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 1,\n  'blockquote::cite': 0,\n  'command::icon': 1,\n  'del::cite': 0,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 0,\n  'q::cite': 0,\n  'video::poster': 1,\n  'video::src': 1\n};\nhtml4[ 'URIEFFECTS' ] = html4.URIEFFECTS;\nhtml4.ltypes = {\n  'UNSANDBOXED': 2,\n  'SANDBOXED': 1,\n  'DATA': 0\n};\nhtml4[ 'ltypes' ] = html4.ltypes;\nhtml4.LOADERTYPES = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 2,\n  'blockquote::cite': 2,\n  'command::icon': 1,\n  'del::cite': 2,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 2,\n  'q::cite': 2,\n  'video::poster': 1,\n  'video::src': 2\n};\nhtml4[ 'LOADERTYPES' ] = html4.LOADERTYPES;\n// export for Closure Compiler\n// if (typeof window !== 'undefined') {\n//   window['html4'] = html4;\n// }\n\n/* eslint-enable */\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/vendor/html4-defs.js\n **/","import {Component} from './Component';\nimport {LIB_NAME} from '../constants/general';\nimport {IS_TYPING} from '../constants/dialog';\nimport {templateEngine} from '../services/templateEngine';\nimport {dialogList} from '../services/dialogList';\n\nexport class DialogBubble extends Component {\n    constructor() {\n        super();\n\n        this.side = '';\n        this.message = '';\n        this.type = null;\n    }\n\n    componentWillMount() {\n        dialogList.addPhrase({\n            side: this.side,\n            message: this.message,\n            ref: this.type === IS_TYPING ? this.refs.bubbleContainer : null,\n            type: this.type\n        });\n    }\n\n    /**\n     * Render bubble element\n     * @param data {Object}\n     * @param data.side {String} - 'user', 'chat'\n     * @param data.message {String}\n     * @param data.type {String} - 'is-typing'\n     * @returns {Object}\n     */\n    render(data) {\n        const bubbleClass = `${LIB_NAME}-dialog-bubble`;\n        const bubbleContainerClass = `${LIB_NAME}-dialog-bubble-container`;\n        const innerTemplate = `\n            <div class=\"<% bubbleClass %>\">\n                <div class=\"${LIB_NAME}-dialog-bubble__text\">\n                    <% message %>\n                </div>\n            </div>\n        `;\n\n        this.side = data.side;\n        this.message = data.message;\n        this.type = data.type;\n\n        let bubbleClasses = [];\n        bubbleClasses.push(bubbleClass);\n        if (data.side) {\n            bubbleClasses.push(`${bubbleClass}_${data.side}`);\n        }\n        if (data.type) {\n            bubbleClasses.push(`${bubbleClass}_${data.type}`);\n        }\n        data.bubbleClass = bubbleClasses.join(' ');\n\n        return {\n            div: {\n                className: bubbleContainerClass,\n                innerHTML: templateEngine(innerTemplate, data),\n                ref: 'bubbleContainer'\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/DialogBubble.js\n **/","import {Component} from './Component';\nimport {LIB_NAME} from '../constants/general';\nimport {ADD_PHRASE, SIDE_USER} from '../constants/dialog';\nimport {OPEN_CHAT} from '../constants/header';\nimport {templateEngine} from '../services/templateEngine';\nimport {eventEmitter} from '../services/eventEmitter';\nimport {chatSettings} from '../services/chatSettings';\n\nexport class Input extends Component {\n    constructor() {\n        super();\n\n        this.inputClass = `${LIB_NAME}-input__input-field`;\n        this.inputEl = null;\n\n        this.onSubmit = (event) => {\n            event.preventDefault();\n            if (this.inputEl.value !== '') {\n                eventEmitter.emit(ADD_PHRASE, {\n                    side: SIDE_USER,\n                    message: this.inputEl.value\n                });\n                this.inputEl.value = '';\n            }\n        };\n    }\n\n    addEvents() {\n        eventEmitter.on(OPEN_CHAT, () => {\n            if (!this.inputEl) {\n                const $$inputEl = this.refs.inputForm.getElementsByClassName(this.inputClass);\n                if ($$inputEl) {\n                    this.inputEl = $$inputEl[0];\n                }\n            }\n            setTimeout(() => {\n                this.inputEl.focus();\n            });\n        });\n    }\n\n    render() {\n        const data = {\n            sendText: chatSettings.getProperty('sendText'),\n            inputPlaceholder: chatSettings.getProperty('inputPlaceholder')\n        };\n\n        const id = `${LIB_NAME}-input`;\n        const innerTemplate = `\n            <div class=\"${LIB_NAME}-input__cell\">\n                <input type=\"text\" class=\"${this.inputClass}\" placeholder=\"<% inputPlaceholder %>\" />\n            </div>\n            <div class=\"${LIB_NAME}-input__cell\">\n                <button type=\"submit\" class=\"${LIB_NAME}-input__send\">\n                    <% sendText %>\n                </button>\n            </div>\n        `;\n\n        this.addEvents();\n\n        return {\n            form: {\n                id,\n                innerHTML: templateEngine(innerTemplate, data),\n                ref: 'inputForm',\n                submit: this.onSubmit\n            }\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/components/Input.js\n **/","export const domHelper = (() => {\n    return {\n        removeClass: (el, className) => {\n            if (el.classList) {\n                el.classList.remove(className);\n            } else {\n                el.className = el.className\n                    .replace(new RegExp(`(^|\\\\b)${className.split(' ').join('|')}(\\\\b|$)`, 'gi'), ' ');\n            }\n        },\n\n        addClass: (el, className) => {\n            if (el.classList) {\n                el.classList.add(className);\n            } else {\n                el.className += ` ${className}`;\n            }\n        },\n\n        hasClass: (el, className) => {\n            if (el.classList) {\n                el.classList.contains(className);\n            } else {\n                new RegExp(`(^| )${className}( |$)`, 'gi').test(el.className);\n            }\n        },\n\n        toggleClass: (el, className) => {\n            if (el.classList) {\n                el.classList.toggle(className);\n            } else {\n                const classes = el.className.split(' ');\n                const existingIndex = classes.indexOf(className);\n\n                if (existingIndex >= 0) {\n                    classes.splice(existingIndex, 1);\n                } else {\n                    classes.push(className);\n                }\n\n                el.className = classes.join(' ');\n            }\n        }\n    };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/services/domHelper.js\n **/"],"sourceRoot":""}